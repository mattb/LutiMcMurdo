{"version":3,"sources":["constants.js","components/Menu.js","components/Intro.js","Offline.js","components/InfoButton.js","components/ShareButtons.js","components/InfoBox.js","Sound.js","vid_config.js","Sounds.js","Video.js","Videos.js","VideoData.js","Homepage.js","Page/Page.js","About.js","Acknowledgements.js","App.js","serviceWorker.js","index.js"],"names":["DARK_MODE_HASH","menuData","slug","content","Menu","props","handleKeyUp","e","which","state","open","isMobile","tabKeyPress","document","getElementsByClassName","focus","setState","navigatingMap","shiftKey","selected","this","page","preventDefault","prevState","menuItem","key","hidden","hash","window","location","query","search","href","className","onClick","handleMenuClick","onKeyUp","renderIcon","src","aria-label","getAriaLabel","alt","CSSTransition","in","timeout","classNames","displayMode","map","renderItem","innerWidth","React","Component","Intro","visible","children","useQuery","useLocation","useMemo","URLSearchParams","Offline","get","Online","InfoButton","handleClick","type","ShareButtons","url","message","encodedMessage","encodeURIComponent","encodedURI","navigator","share","text","then","console","debug","catch","error","target","rel","aria-hidden","xmlns","viewBox","d","InfoBox","desc","title","useState","setHidden","useEffect","body","classList","add","removeEventListener","setTimeout","addEventListener","mp3_source_prefix","Sound","setupAudio","mp3","audio","track","crossOrigin","loop","autoplay","paused","log","play","audioContext","createMediaElementSource","gain","createGain","pan","createStereoPanner","connect","analyser","destination","applyAudioSettings","value","volume","prevProps","exponentialRampToValueAtTime","currentTime","L","divIcon","html","file","iconSize","Circle","center","color","radius","Marker","position","icon","id","ref","_","require","img_height","img_width","hls_config","enableWorker","capLevelToPlayerSize","maxBufferSize","maxBufferLength","vid_config","muted","playsinline","controls","bounds_to_xy","bounds","x_bottom_left","Math","floor","getSouthWest","lng","y_bottom_left","lat","x_top_right","getNorthEast","y_top_right","xy_to_bounds","x","y","zoomSettings","screen","width","height","minZoom","initZoom","maxZoom","boundsPad","Sounds","calculateAudioPositions","getBounds","pad","getCenter","CRS","Simple","distance","getNorthWest","sounds","forEach","sound","latlngs","File","v","abs","keyForSound","analyserForSound","analysers","createAnalyser","fftSize","enabled","AudioContext","webkitAudioContext","handleOnMove","throttle","leading","trailing","mounted","tsv","parseInt","X","Y","llb","latLngBounds","resume","style","backgroundColor","Color","toFixed","VIDEO_EVENTS","Video","loaded","hls","undefined","cachedHls","m3u8","autocreate","Hls","on","Events","MEDIA_ATTACHED","loadSource","configureVideo","media","MEDIA_DETACHED","removeVideoListeners","addVideoListeners","video","name","eventLogger","disableVideoHls","detachMedia","disableVideoM3u8","leafletElement","getElement","pause","removeAttribute","load","border","playsInline","objectFit","enableVideoM3u8","enableVideoHls","attachMedia","enableVideo","showCanplayStatus","canplay","tagName","canPlayType","isSupported","disableVideo","remove","debugMessage","JSON","stringify","xy","textLoc","debugMarker","Rectangle","VideoOverlay","requestAnimationFrame","spinnerTest","ImageOverlay","Videos","alreadyIndexedIds","getCenterVideo","toBounds","centerVideoXY","centerVideo","head","videoLayout","filter","onVideoChange","index","evt","onVideoStatusChange","isVisible","vid","globalDisable","xy_bounds","isEqual","disableAllVideos","resetDeadMansSwitch","clearTimeout","deadMansSwitch","MINUTES_OF_NO_INTERACTION_BEFORE_VIDEOS_DISABLED","eventName","nextProps","nextState","updateOk","offline","videos","idx","filename","useCloudfront","push","indexFunc","VideoData","data","Object","assign","slice","analyticsUrl","LatLngBounds","screenshot","info","magnification","video_layout","fromBBoxString","bbox","split","parseFloat","west","south","east","north","LatLng","map_bounds","max","l","y_count","x_count","Homepage","startupTime","Date","now","forceUpdate","calculate_initial_video","init_position","init_center","initialVideo","latLng","Map","include","LayerIndexMixin","match","params","introVisible","interacting","videosPlaying","currentVideo","onMapLoad","updateVideoStatus","status","keys","length","queryString","parse","introMessage","role","helmetData","description","image","Helmet","property","crs","zoomControl","zoomSnap","zoomDelta","zoom","keyboardPanDelta","onMove","maxBounds","attributionControl","bounceAtZoomLimits","showLoadingProblem","loading","cloudfront","defaultProps","withRouter","RemoveAnchorTags","processedChildren","Children","processChildren","child","isValidElement","cloneElement","Page","About","frameBorder","allow","allowFullScreen","Acknowledgements","App","hideMap","path","component","Boolean","hostname","ReactDOM","render","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"qSAGaA,EAAiB,Q,0BCKxBC,G,MAAW,CACf,CAAEC,KAAM,SAAUC,QAAS,sBAC3B,CAAED,KAAM,OAAQC,QAAS,QACzB,CAAED,KAAM,QAASC,QAAS,qBAC1B,CAAED,KAAM,SAAUC,QAAS,sBAGRC,E,kDAKnB,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IA+BRC,YAAc,SAACC,GACb,GAAgB,IAAZA,EAAEC,SACF,EAAKC,MAAMC,OACXN,EAAKO,YAGT,OAAK,EAAKF,MAAMG,iBAUZR,EAAKO,YAAc,EAAKF,MAAMG,cAElBC,SAASC,uBAAuB,qBAClC,GAAGC,QAEf,EAAKC,SAAS,CAAEJ,aAAa,EAAOK,eAAe,OAd/C,EAAKR,MAAMQ,eAAiBV,EAAEW,UAClBL,SAASC,uBAAuB,UAClC,GAAGC,aAGjB,EAAKC,SAAS,CAAEJ,aAAa,MAzC/B,EAAKH,MAAQ,CACXU,SAAU,GACVT,MAAM,EACNE,aAAa,EACbK,eAAe,GAPA,E,qDAWnB,WACEG,KAAKJ,SAAS,CAAEG,SAAUC,KAAKf,MAAMgB,S,6BAGvC,SAAgBd,EAAGL,GACjB,OAAQA,GACN,IAAK,SACH,IAAKE,EAAKO,WAER,YADAS,KAAKJ,SAAS,CAAEG,SAAU,SAI5BZ,EAAEe,iBACFF,KAAKJ,UAAS,SAACO,GAAD,MAAgB,CAAEb,MAAOa,EAAUb,SACjD,MAEF,QACEU,KAAKJ,SAAS,CAAEG,SAAUjB,O,0BA6BhC,WACE,OAAIkB,KAAKX,MAAMC,KACN,gBAEF,kB,oBAGT,SAAOR,GACL,OAAIkB,KAAKX,MAAMC,MAAiB,WAATR,GAA0B,O,wBAKnD,SAAWsB,EAAUC,GAAM,IAAD,OAChBvB,EAAkBsB,EAAlBtB,KAAMC,EAAYqB,EAAZrB,QACRuB,EAASN,KAAKM,OAAOxB,GAAQ,SAAW,GACxCyB,EAAOC,OAAOC,SAASF,KACvBG,EAAQF,OAAOC,SAASE,OAExBC,EACK,SAAT9B,GAA4B,WAATA,EAAnB,WACQ4B,GADR,OACgBH,GADhB,WAEQzB,GAFR,OAEe4B,GAFf,OAEuBH,GAErBR,EAAWjB,IAASkB,KAAKX,MAAMU,SAAW,WAAa,GAM3D,MAJa,WAATjB,GAA6C,SAAxBkB,KAAKX,MAAMU,WAClCA,EAAW,YAIX,wBAAIM,IAAKA,EAAKQ,UAAS,UAAKd,EAAL,YAAiBO,EAAjB,YAA2BxB,IAChD,yBAAK+B,UAAU,qBACb,0BAAMA,UAAU,aACd,uBACED,KAAMA,EACNC,UAAW/B,EACXgC,QAAS,SAAC3B,GACR,EAAK4B,gBAAgB5B,EAAGL,IAE1BkC,QAAShB,KAAKd,aAEbc,KAAKiB,WAAWZ,GAChBtB,Q,wBAQb,SAAWsB,GACT,OAAY,IAARA,EAAkB,KAGpB,0BAAMQ,UAAU,gBACd,yBACEA,UAAU,cACVK,IAAI,sBACJC,aAAYnB,KAAKoB,eACjBC,IAAI,Q,oBAMZ,WAAU,IAAD,OACP,OACE,6BACE,kBAACC,EAAA,EAAD,CAAeC,GAAIvB,KAAKX,MAAMC,KAAMkC,QDlJZ,KCmJtB,wBAAIX,UAAWY,IAAW,OAAQzB,KAAKf,MAAMyC,cAC1C7C,EAAS8C,KAAI,SAACvB,EAAUC,GAAX,OAAmB,EAAKuB,WAAWxB,EAAUC,Y,uBApIrE,WACE,OAAOG,OAAOqB,YDhBe,S,GCcCC,IAAMC,W,iFCRzB,SAASC,EAAM/C,GAC5B,OACE,yBAAK4B,UAAU,SACb,kBAACS,EAAA,EAAD,CAAeC,GAAItC,EAAMgD,QAAST,QFVR,KEWxB,wBACEX,UAAWY,IAAWxC,EAAMyC,YAAa,CAAEpB,QAASrB,EAAMgD,WAEzDhD,EAAMiD,YCNjB,SAASC,IACP,IAAQxB,EAAWyB,cAAXzB,OAER,OAAO0B,mBAAQ,kBAAM,IAAIC,gBAAgB3B,KAAS,CAACA,IAG9C,IAAM4B,EAAU,SAAC,GAAkB,IAAhBL,EAAe,EAAfA,SAExB,QADkBC,IAAWK,IAAI,WAExBN,EAEF,MAEIO,EAAS,SAAC,GAAkB,IAAhBP,EAAe,EAAfA,SAEvB,QADkBC,IAAWK,IAAI,WAExB,KAEFN,G,OCtBM,SAASQ,EAAT,GAAkD,EAA5BhB,YAA6B,IAAhBiB,EAAe,EAAfA,YAMhD,OACE,4BAAQC,KAAK,SAAS/B,UAAU,cAAcC,QAAS6B,GACrD,yBAAK9B,UAAU,cAAcK,IANN,uBAMgBC,aAJzB,eAIgDE,IAAI,MCRzD,SAASwB,EAAT,GAAgC,IAARC,EAAO,EAAPA,IAC/BC,EACJ,2EACIC,EAAiBC,mBAAmBF,GACpCG,EAAaD,mBAAmBH,GAatC,OAAIK,UAAUC,MAEV,yBAAKvC,UAAU,sBACb,4BAAQ+B,KAAK,SAAS9B,QAfT,WACjBqC,UACGC,MAAM,CACLC,KAAMN,EACND,QAEDQ,MAAK,WACJC,QAAQC,MAAM,0BAEfC,MAAMF,QAAQG,SAMb,eAQJ,yBAAK7C,UAAU,eACb,uBACEA,UAAU,4BACVD,KAAI,mDAA8CsC,EAA9C,kBAAkEF,GACtEW,OAAO,SACPC,IAAI,sBACJzC,aAAW,IAEX,yBAAKN,UAAU,gFACb,yBACEgD,cAAY,OACZhD,UAAU,8DAEV,yBAAKiD,MAAM,6BAA6BC,QAAQ,aAC9C,0BAAMC,EAAE,qHAMhB,uBACEnD,UAAU,4BACVD,KAAI,iDAA4CoC,EAA5C,gBAAkEE,GACtES,OAAO,SACPC,IAAI,sBACJzC,aAAW,IAEX,yBAAKN,UAAU,+EACb,yBACEgD,cAAY,OACZhD,UAAU,8DAEV,yBAAKiD,MAAM,6BAA6BC,QAAQ,aAC9C,0BAAMC,EAAE,ucAMhB,uBACEnD,UAAU,4BACVD,KAAI,0BAAqBoC,EAArB,iBAA4CE,GAChDS,OAAO,QACPC,IAAI,WACJzC,aAAW,IAEX,yBAAKN,UAAU,6EACb,yBACEgD,cAAY,OACZhD,UAAU,8DAEV,yBAAKiD,MAAM,6BAA6BC,QAAQ,aAC9C,0BAAMC,EAAE,8f,OCvEP,SAASC,EAAT,GAAqD,IAAlCC,EAAiC,EAAjCA,KAAMxC,EAA2B,EAA3BA,YAAayC,EAAc,EAAdA,MAAOrB,EAAO,EAAPA,IAC1D,EAA4BsB,oBAAS,GAArC,mBAAO9D,EAAP,KAAe+D,EAAf,KA0BA,OAxBAC,qBAAU,WACK7E,SAAS8E,KACjBC,UAAUC,IAAI,mBAEnB,IAAM9C,EAAMlC,SAASC,uBAAuB,qBAAqB,GAE3DiD,EAAc,WAClB0B,GAAW/D,IAGb,GAAIA,EAIF,OAHAqB,EAAI+C,oBAAoB,QAAS/B,GACjChB,EAAI+C,oBAAoB,aAAc/B,QACtChB,EAAI+C,oBAAoB,YAAa/B,GAIvCnC,OAAOmE,YAAW,WAChBhD,EAAIiD,iBAAiB,QAASjC,GAC9BhB,EAAIiD,iBAAiB,aAAcjC,GACnChB,EAAIiD,iBAAiB,YAAajC,KACjC,OACF,CAACrC,IAGF,kBAACgB,EAAA,EAAD,CAAeC,IAAKjB,EAAQkB,QA9BP,KA+BnB,6BACE,kBAAC,EAAD,CACEE,YAAaA,EACbiB,YAAa,kBAAM0B,GAAW/D,MAEhC,yBAAKO,UAAWY,IAAW,eAAgBC,IACzC,yBAAKb,UAAU,cACb,4BAAKsD,IAEP,yBAAKtD,UAAU,oBAAoBqD,GACnC,kBAACzB,EAAD,KACE,kBAACI,EAAD,CAAcC,IAAKA,Q,+ECjDzB+B,EAAoB,kDAELC,E,4MAwBnBC,WAAa,SAACC,GAAD,OAAS,SAACC,GAChBA,IACD,EAAKC,QAET,EAAKD,MAAQA,EACb,EAAKA,MAAME,YAAc,YACzB,EAAKF,MAAM/D,IAAM2D,EAAoBG,EACrC,EAAKC,MAAMG,MAAO,EAClB,EAAKH,MAAMI,UAAW,EACjB,EAAKpG,MAAMqG,SACd/B,QAAQgC,IAAI,aACZ,EAAKN,MAAMO,QAGb,EAAKN,MAAQ,EAAKjG,MAAMwG,aAAaC,yBAAyBT,GAC9D,EAAKU,KAAO,EAAK1G,MAAMwG,aAAaG,aACpC,EAAKC,IAAM,EAAK5G,MAAMwG,aAAaK,qBAEnC,EAAKZ,MACFa,QAAQ,EAAKJ,MACbI,QAAQ,EAAKF,KACbE,QAAQ,EAAK9G,MAAM+G,UACnBD,QAAQ,EAAK9G,MAAMwG,aAAaQ,aAEnC,EAAKC,yB,EAGPA,mBAAqB,WACnB,EAAKP,KAAKA,KAAKQ,MAAQ,EAAKlH,MAAMmH,Q,wDAnDpC,SAAmBC,GAQjB,GAPIrG,KAAKf,MAAMqG,SAAWe,EAAUf,QAAWtF,KAAKf,MAAMqG,QACpDtF,KAAKiF,QACP1B,QAAQgC,IAAI,eACZvF,KAAKiF,MAAMO,QAIXxF,KAAK2F,KAAM,CACb,GAAI3F,KAAK2F,KAAKA,KAAKQ,QAAUnG,KAAKf,MAAMmH,OACtC,OAEEpG,KAAKf,MAAMmH,OAAS,EACtBpG,KAAK2F,KAAKA,KAAKW,6BACbtG,KAAKf,MAAMmH,OACXpG,KAAKf,MAAMwG,aAAac,YAAc,KAGxCvG,KAAK2F,KAAKA,KAAKQ,MAAQ,K,oBAoC7B,WACE,IAAM9C,EAAOmD,IAAEC,QAAQ,CACrBC,KAAK,4BAAD,OAA8B1G,KAAKf,MAAM0H,KAAzC,UACJC,SAAU,SAGZ,OACE,oCACG5G,KAAKf,MAAMuE,OACV,oCACE,kBAACqD,EAAA,EAAD,CACExG,IAAG,gBAAWL,KAAKf,MAAMwB,SAAS,GAA/B,YAAqCT,KAAKf,MAAMwB,SAAS,IAC5DqG,OAAQ9G,KAAKf,MAAMwB,SACnBsG,MAAO/G,KAAKf,MAAM8H,MAClBC,OAA4B,IAApBhH,KAAKf,MAAMmH,SAErB,kBAACa,EAAA,EAAD,CAAQC,SAAUlH,KAAKf,MAAMwB,SAAU0G,KAAM9D,KAGjD,2BACE+D,GAAE,gBAAWpH,KAAKf,MAAM0H,MACxBtG,IAAG,gBAAWL,KAAKf,MAAM0H,MACzBU,IAAKrH,KAAK+E,WAAW/E,KAAKf,MAAM0H,MAChCvB,MAAI,S,GA9EqBtD,IAAMC,WCNnCuF,EAAIC,EAAQ,IAELC,EAAa,KACbC,EAAY,KAaZC,EAAa,CACxBlE,OAAO,EACPmE,cAAc,EACdC,sBAAsB,EACtBC,cAAe,GACfC,gBAAiB,GAGNC,EAAa,CACxBC,OAAO,EACP3C,UAAU,EACV4C,aAAa,EACb7C,MAAM,EACN8C,UAAU,GAKCC,GAFiB,GAAD,OAAKX,EAAL,MAA2B,GAAD,OAAKC,EAAL,MAE3B,SAACW,GAC3B,MAAO,CACLC,cAAeC,KAAKC,MAAMH,EAAOI,eAAeC,IAAtB,MAC1BC,cAAeJ,KAAKC,MAAMH,EAAOI,eAAeG,IAAtB,MAC1BC,YAAaN,KAAKC,MAAMH,EAAOS,eAAeJ,IAAtB,MACxBK,YAAaR,KAAKC,MAAMH,EAAOS,eAAeF,IAAtB,SAIfI,EAAe,SAACC,EAAGC,GAC9B,MAAO,CACL,CAAC,MAACA,EAAI,GAAuB,MAACD,EAAI,IAClC,CAAC,MAACC,EAAI,GAAuB,MAACD,EAAI,MAIzBE,EAAe,WAG1B,OAFqB1I,OAAO2I,OAAOC,MAAQ5I,OAAO2I,OAAOE,OACzB,MAEvB,CACLC,SAAU,IACVC,UAAW,KACXC,QAAS,GACTC,UAAW,IAGR,CACLH,SAAU,IACVC,UAAW,GACXC,SAAU,GACVC,UAAW,MCtDMC,G,kDACnB,WAAYzK,GAAQ,IAAD,EAEjB,GAFiB,qBACjB,cAAMA,IAuDR0K,wBAA0B,WACxB,GAAK,EAAK1K,MAAM0C,IAAhB,CAIA,IAAMyE,EAAS,GACTgC,EAAS,EAAKnJ,MAAM0C,IAAIiI,YAAYC,IAAI,IACxC/C,EAASsB,EAAO0B,YAChB9C,EAASR,IAAEuD,IAAIC,OAAOC,SAAS7B,EAAO8B,eAAgBpD,GAC5D,EAAKzH,MAAM8K,OAAOC,SAAQ,SAACC,GACzB,IAAM5J,EAAW,EAAK6J,QAAQD,EAAME,MAChCC,EAAIlC,KAAKmC,IAAIjE,IAAEuD,IAAIC,OAAOC,SAASnD,EAAQrG,IAAauG,EACxDwD,EAAI,IACNA,EAAI,GAEFA,EAAI,IACNA,EAAI,GAENpE,EAAO,EAAKsE,YAAYL,IAAU,EAAIG,KAExC,EAAK5K,SAAS,CAAEwG,aA5EC,EA+EnBsE,YAAc,SAACL,GACb9G,QAAQgC,IAAI,EAAK+E,SACjB,IAAM7J,EAAW,EAAK6J,QAAQD,EAAME,MACpC,MAAM,SAAN,OAAgB9J,EAASkI,IAAzB,YAAgClI,EAASgI,MAlFxB,EAqFnBkC,iBAAmB,SAACN,GAClB,IAAMhK,EAAM,EAAKqK,YAAYL,GAC7B,KAAMhK,KAAO,EAAKuK,WAAY,CAC5B,IAAM5E,EAAW,EAAKP,aAAaoF,iBACnC7E,EAAS8E,QAAU,GACnB,EAAKF,UAAUvK,GAAO2F,EAExB,OAAO,EAAK4E,UAAUvK,KA1FjB,EAAKpB,MAAM8L,QACd,sBAEF,EAAK1L,MAAQ,CACX8K,OAAQ,GACR/D,OAAQ,IAEV,EAAKkE,QAAU,GACf,EAAKM,UAAY,GACjB,IAAMI,EAAexK,OAAOwK,cAAgBxK,OAAOyK,mBACnD,EAAKxF,aAAe,IAAIuF,EAZP,OAiBjB,EAAKE,aAAeC,KAHC,WACnB,EAAKxB,4BAEoC,GAAI,CAC7CyB,SAAS,EACTC,UAAU,IAnBK,E,qDAuBnB,WAAqB,IAAD,OACbrL,KAAKf,MAAM8L,UAGhB/K,KAAKsL,SAAU,EACfC,YA/BF,oKA+B0B,SAAClB,GACvB,IAAMjC,EAASW,EAAayC,SAASnB,EAAMoB,EAAG,IAAKD,SAASnB,EAAMqB,EAAG,KAC/DC,EAAMnF,IAAEoF,aAAaxD,GAC3B,EAAKkC,QAAQD,EAAME,MAAQoB,EAAI7B,YAC/BvG,QAAQgC,IAAI,KAAM8E,EAAMoB,EAAGpB,EAAMqB,EAAGtD,GACpC,EAAKxI,UAAS,SAACO,GAAD,MAAgB,CAC5BgK,OAAO,GAAD,mBAAMhK,EAAUgK,QAAhB,CAAwBE,WAGlCrK,KAAKJ,SAAS,CAAE0F,OAAQtF,KAAKf,MAAMqG,SAC/BtF,KAAKf,MAAM0C,MACb3B,KAAKf,MAAM0C,IAAIiD,iBAAiB,OAAQ5E,KAAKkL,cAC7ClL,KAAKkL,mB,gCAIT,SAAmB7E,GAAY,IAAD,OACxBrG,KAAKf,MAAMqG,SAAWe,EAAUf,QAClCX,YAAW,WACL,EAAKc,eACPlC,QAAQgC,IAAI,gBACZ,EAAKE,aAAaoG,SAClB,EAAKjM,SAAS,CAAE0F,QAAQ,OAEzB,O,oBA2CP,WAAU,IAAD,OACP,OAAKtF,KAAKf,MAAM8L,QAId,6DAEE,kBAAC,IAAD,CAAS7D,SAAS,YAChB,yBAAKrG,UAAU,eACZb,KAAKX,MAAM8K,OAAOxI,KAAI,SAAC0I,GAAD,OACrB,yBAAKhK,IAAG,gBAAW,EAAKqK,YAAYL,KACjCA,EAAME,KACP,6BACA,yBACEuB,MAAO,CACLzC,OAAQ,OACR0C,gBAAiB1B,EAAM2B,MACvB5C,MAAM,GAAD,OAGC,IAFH,EAAK/J,MAAM+G,OAAO,EAAKsE,YAAYL,KAAW,GAAG4B,QAChD,GAFC,QAJT,cARV,MA0BGjM,KAAKX,MAAM8K,OAAOxI,KAAI,SAAC0I,GACtB,IAAM5J,EAAW,EAAK6J,QAAQD,EAAME,MAC9BlK,EAAM,EAAKqK,YAAYL,GAC7B,OACE,kBAAC,EAAD,CACE7G,OAAK,EACLnD,IAAKA,EACLoF,aAAc,EAAKA,aACnBhF,SAAUA,EACVsG,MAAOsD,EAAM2B,MACbrF,KAAM0D,EAAME,KACZvE,SAAU,EAAK2E,iBAAiBN,GAChCjE,OAAQ,EAAK/G,MAAM+G,OAAO/F,IAAQ,EAClCiF,OAAQ,EAAKjG,MAAMiG,aA1CpB,S,GAlGuBxD,IAAMC,W,qFCLpCmK,GAAe,CACnB,UACA,UACA,iBACA,OACA,iBACA,aACA,aACA,UACA,QACA,QACA,UACA,UACA,WAGmBC,G,4MACnBC,QAAS,E,EAETrB,SAAU,E,EAEVsB,SAAMC,E,EAENC,UAAY,SAACC,EAAMC,GACjB,GAAIA,QAA2BH,IAAb,EAAKD,IAAmB,CACxC,IAAMA,EAAM,IAAIK,KAAIhF,GACpB2E,EAAIM,GAAGD,KAAIE,OAAOC,gBAAgB,WAChCR,EAAIS,WAAWN,GACf,EAAKO,eAAeV,EAAIW,UAE1BX,EAAIM,GAAGD,KAAIE,OAAOK,gBAAgB,WAChC,EAAKC,qBAAqBb,EAAIW,UAEhC,EAAKX,IAAMA,EAEb,OAAO,EAAKA,K,EAGdc,kBAAoB,SAACC,GACnBlB,GAAa9B,SAAQ,SAACiD,GAAD,OACnBD,EAAMxI,iBAAiByI,EAAM,EAAKpO,MAAMqO,iB,EAI5CJ,qBAAuB,SAACE,GACtBlB,GAAa9B,SAAQ,SAACiD,GAAD,OACnBD,EAAM1I,oBAAoB2I,EAAM,EAAKpO,MAAMqO,iB,EAI/CC,gBAAkB,WAChB,IAAMlB,EAAM,EAAKE,UAAU,EAAKtN,MAAMuN,MAAM,GACxCH,GACFA,EAAImB,e,EAIRC,iBAAmB,SAACpG,GAClB,IAAM+F,EAAQ/F,EAAIqG,eAAeC,aACjC,EAAKT,qBAAqBE,GAE1BA,EAAMQ,QACNR,EAAMS,gBAAgB,OACtBT,EAAMU,Q,EAIRf,eAAiB,SAACK,GAChBA,EAAMtB,MAAMiC,OAAS,8BACrBX,EAAMhE,MAAQ,KACdgE,EAAM/D,OAAS,KAMf+D,EAAMjI,YAAc,YACpBiI,EAAMY,aAAc,EACpBZ,EAAMpF,OAAQ,EACdoF,EAAMhI,MAAO,EACbgI,EAAMtB,MAAMmC,UAAY,QACxB,EAAKd,kBAAkBC,I,EAIzBc,gBAAkB,SAAC7G,GACjB,IAAMmF,EAAOnF,EAAIpI,MAAMuN,KACjBY,EAAQ/F,EAAIqG,eAAeC,aAEjCP,EAAMlM,IAAMsL,EACZ,EAAKO,eAAeK,I,EAGtBe,eAAiB,SAAC9G,GAChB,IAAMmF,EAAOnF,EAAIpI,MAAMuN,KACjBY,EAAQ/F,EAAIqG,eAAeC,aAEjC,EAAKpB,UAAUC,GAAM,GAAM4B,YAAYhB,I,EAGzCiB,YAAc,SAAChH,GACb,GAAY,OAARA,IACA,EAAK0D,QAAT,CAGA,EAAKA,SAAU,EAEf,IAAMqC,EAAQ/F,EAAIqG,eAAeC,aAEjC,GADA,EAAKW,kBAAkBlB,EAAO,EAAKnO,MAAMsP,SACnB,UAAlBnB,EAAMoB,QAEV,OAAIpB,EAAMqB,YAAY,kCACpB,EAAKP,gBAAgB7G,QACrB9D,QAAQC,MAAM,oBAAqB4J,EAAMlM,MAGvCwL,KAAIgC,eACN,EAAKP,eAAe9G,QACpB9D,QAAQC,MAAM,mBAAoB4J,EAAMlM,WAG1CqC,QAAQC,MAAM,mC,EAGhBmL,aAAe,SAACtH,GACd,GAAY,OAARA,GACC,EAAK0D,QAAV,CAGA,EAAKA,SAAU,EAEf,IAAMqC,EAAQ/F,EAAIqG,eAAeC,aAEjC,GADA,EAAKW,kBAAkBlB,EAAO,EAAKnO,MAAMsP,SACnB,UAAlBnB,EAAMoB,QACV,OAAIpB,EAAMqB,YAAY,kCACpBlL,QAAQC,MAAM,qBAAsB4J,EAAMlM,UAC1C,EAAKuM,iBAAiBpG,IAGpBqF,KAAIgC,eACNnL,QAAQC,MAAM,oBAAqB4J,EAAMlM,UACzC,EAAKqM,gBAAgBlG,SAGvB9D,QAAQC,MAAM,oC,EAGhB8K,kBAAoB,SAAClB,EAAOmB,GACtBA,GACFnB,EAAM5I,UAAUoK,OAAO,iBACvBxB,EAAM5I,UAAUC,IAAI,mBAEpB2I,EAAM5I,UAAUC,IAAI,iBACpB2I,EAAM5I,UAAUoK,OAAO,mB,4CAI3B,WAAU,IAAD,OACP,IAAK5O,KAAKoM,OAAQ,CAChB,IAAKpM,KAAKf,MAAMgD,QACd,OAAO,KAETjC,KAAKoM,QAAS,EAGhB,IAAM/I,EAAOmD,IAAEC,QAAQ,CACrBC,KAAK,GAAD,OAAK1G,KAAKf,MAAMmI,GAAhB,YAAsBpH,KAAKf,MAAM4P,aAAjC,0CAEO7O,KAAKf,MAAMsP,QAFlB,oBAEqCO,KAAKC,UAC5C/O,KAAKf,MAAMmJ,QAHT,iBAIM0G,KAAKC,UAAU/O,KAAKf,MAAM+P,OAEhCC,EAAU,CACdjP,KAAKf,MAAMmJ,OAAO,GAAG,GAAK,IAC1BpI,KAAKf,MAAMmJ,OAAO,GAAG,GAAK,KAExB8G,EAAc,qCAClB,GAAIlP,KAAKf,MAAMuE,MAEb,OADA0L,EAAc,kBAACjI,EAAA,EAAD,CAAQC,SAAU+H,EAAS9H,KAAM9D,IAE7C,kBAAC8L,GAAA,EAAD,CACE/H,GAAIpH,KAAKf,MAAMmI,GACf/G,IAAG,UAAKL,KAAKf,MAAMmI,GAAhB,SACHgB,OAAQpI,KAAKf,MAAMmJ,OACnBrB,MAAO/G,KAAKf,MAAMgD,QAAU,OAAS,QAEpCiN,GAUP,OACE,oCACE,kBAACE,GAAA,EAAD,iBACMpP,KAAKf,MADX,CAEE6D,IAAI,GACJuE,IAVW,SAACA,GAAD,OACfgI,uBAAsB,kBACpB,EAAKpQ,MAAMgD,QAAU,EAAKoM,YAAYhH,GAAO,EAAKsH,aAAatH,OAS7DhH,IAAG,gBAAWL,KAAKf,MAAMmI,MAExB8H,GAEFlP,KAAKf,MAAMqQ,cAAgBtP,KAAKf,MAAMsP,SACrC,kBAACgB,GAAA,EAAD,CACEnH,OAAQpI,KAAKf,MAAMmJ,OACnB/H,IAAG,gBAAWL,KAAKf,MAAMmI,IACzBtE,IAAI,6B,GAlMmBhB,IAAMC,WCPpByN,G,kDACnB,WAAYvQ,GAAQ,IAAD,uBACjB,cAAMA,IAEDwQ,kBAAoB,GACzB,EAAKpQ,MAAQ,CACXkP,QAAS,GACTtM,SAAS,GAGX,EAAKyN,eAAiB,WACpB,GAAK,EAAKzQ,MAAM0C,IAAhB,CAGA,IACMmF,EADS,EAAK7H,MAAM0C,IAAIiI,YACRE,YAAY6F,SAAS,GACrCC,EAAgBzH,EAAarB,GAC7B+I,EAAcvI,KAAEwI,KACpB,EAAK7Q,MAAM8Q,YAAYC,QACrB,SAACxF,GAAD,OACEoF,EAAcvH,gBAAkBmC,EAAExB,GAClC4G,EAAclH,gBAAkB8B,EAAEvB,WAGpBqD,IAAhBuD,GACF,EAAK5Q,MAAMgR,cAAcJ,KAG7B,EAAKH,iBAEL,EAAKQ,MAAQ,aAEb,EAAK5C,YAAc,SAAClG,GAAD,OAAQ,SAAC+I,GAEvB,EAAK9Q,MAAMkP,QAAQnH,IACN,YAAb+I,EAAIvN,MACU,mBAAbuN,EAAIvN,MACS,YAAbuN,EAAIvN,MAeN,EAAKvD,MAAMkP,QAAQnH,IACL,YAAb+I,EAAIvN,MACU,YAAbuN,EAAIvN,MACS,UAAbuN,EAAIvN,MACS,YAAbuN,EAAIvN,MAEN,EAAKhD,UAAS,SAACO,GACb,IAAMoO,EAAO,6BACRpO,EAAUoO,SADF,mBAEVnH,GAAK,IAKR,OAHI,EAAKnI,MAAMmR,qBACb,EAAKnR,MAAMmR,oBAAoB7B,GAE1B,CAAEA,cA3BX,EAAK3O,UAAS,SAACO,GACb,IAAMoO,EAAO,6BACRpO,EAAUoO,SADF,mBAEVnH,GAAK,IAKR,OAHI,EAAKnI,MAAMmR,qBACb,EAAKnR,MAAMmR,oBAAoB7B,GAE1B,CAAEA,gBAuBf,EAAK8B,UAAY,SAACC,GAChB,OAAI,EAAKjR,MAAMkR,kBAGV,EAAKlR,MAAM4C,YAGX,EAAK5C,MAAMmR,YAIdF,EAAItH,GAAK,EAAK3J,MAAMmR,UAAUnI,eAC9BiI,EAAItH,GAAK,EAAK3J,MAAMmR,UAAU5H,aAC9B0H,EAAIrH,GAAK,EAAK5J,MAAMmR,UAAU9H,eAC9B4H,EAAIrH,GAAK,EAAK5J,MAAMmR,UAAU1H,gBAnFjB,OA+FjB,EAAKoC,aAAe5D,KAAE6D,UARD,WACnB,IAAM/C,EAAS,EAAKnJ,MAAM0C,IAAIiI,YACxB4G,EAAYrI,EAAaC,EAAOyB,IAAI,EAAK5K,MAAMwK,YAChDnC,KAAEmJ,QAAQD,EAAW,EAAKnR,MAAMmR,aACnC,EAAKd,iBACL,EAAK9P,SAAS,CAAE4Q,iBAGyB,GAAI,CAC/CpF,SAAS,EACTC,UAAU,IAGZ,EAAKqF,iBAAmB,WACtBnN,QAAQC,MAAM,+BACd,EAAK5D,SAAS,CACZ2Q,eAAe,KAInB,EAAKI,oBAAsB,WACrB,EAAKtR,MAAMkR,gBACbhN,QAAQC,MAAM,oCACd,EAAK5D,SAAS,CACZ2Q,eAAe,KAGnBK,aAAa,EAAKC,gBAGlB,EAAKA,eAAiBlM,WACpB,EAAK+L,iBACLI,MAvHa,E,qDA4HnB,WAAqB,IAAD,OACd9Q,KAAKf,MAAM0C,MACb3B,KAAKf,MAAM0C,IAAIiD,iBAAiB,OAAQ5E,KAAKkL,cAC7ClL,KAAKkL,gBAEPzL,SAASmF,iBACP,oBACA,WACE,EAAKhF,SAAS,CAAEqC,SAAUxC,SAASa,YAErC,GAEFN,KAAK2Q,sBACL,CAAC,YAAa,UAAW,SAAU,aAAc,aAAavG,SAC5D,SAAC2G,GAAD,OACEtR,SAAS8E,KAAKK,iBACZmM,EACAzJ,KAAE6D,SAAS,EAAKwF,oBAAqB,GAAI,CACvCvF,SAAS,EACTC,UAAU,U,mCAMpB,SAAsB2F,EAAWC,GAAY,IAAD,OAM1C,IALKjR,KAAKf,MAAM0C,KAAOqP,EAAUrP,MAC/B4B,QAAQC,MAAM,qBACdwN,EAAUrP,IAAIiD,iBAAiB,OAAQ5E,KAAKkL,cAC5ClL,KAAKkL,iBAEF5D,KAAEmJ,QAAQO,EAAWhR,KAAKf,OAC7B,OAAO,EAET,IAMIiS,GAAW,EAOf,MAbwB,CACtB,UACA,YACA,UACA,iBAGc9G,SAAQ,SAACiD,GAClB/F,KAAEmJ,QAAQQ,EAAU5D,GAAO,EAAKhO,MAAMgO,MACzC6D,GAAW,MAIRA,I,oBAGT,WAAU,IAAD,OACCC,EAAYnR,KAAKf,MAAjBkS,QACR,IAAKnR,KAAKf,MAAM0C,IACd,OAAO,KAET,IAAMyP,EAAS,GA6Bf,OA5BApR,KAAKf,MAAM8Q,YAAY3F,SAAQ,SAACkG,EAAKe,GACnC,IAAMjK,EAAE,UAAMkJ,EAAIgB,SAAV,YAAsBD,GACxBpP,EAAU,EAAKoO,UAAUC,GAC3B9D,EAAO,EAAKvN,MAAMsS,cAAX,UH3LkB,0CG2LlB,OACkBjB,EAAIgB,SADtB,4BH7LO,6CG6LP,OAEOhB,EAAIgB,SAFX,kBAGPH,IACF3E,EAAI,UHhMe,kCGgMf,OAAoB8D,EAAIgB,SAAxB,mBAGNF,EAAOI,KACL,kBAAC,GAAD,eACEhF,KAAMA,EACNpF,GAAIA,EACJ/G,IAAK+G,EACLkG,YAAa,EAAKA,YAAYlG,GAC9BgG,MAAOkD,EACPtB,GAAI,CAACsB,EAAItH,EAAGsH,EAAIrH,GAChBb,OAAQW,EAAauH,EAAItH,EAAGsH,EAAIrH,GAChCsF,UAAW,EAAKlP,MAAMkP,QAAQnH,GAC9B5D,MAAO,EAAKvE,MAAMuE,MAClB8L,YAAa,EAAKrQ,MAAMqQ,YACxBmC,UAAW,EAAKvB,MAChBjO,QAASA,GACL8F,QAIH,oCAAGqJ,O,GAjNsBtP,IAAMC,W,oBCTrB2P,GACnB,WAAYC,GAAO,IAAD,2BAChBC,OAAOC,OAAO7R,KAAM2R,GAEpB3R,KAAKO,KAAOA,KAAKP,KAAKsR,UAAUQ,MAAM,EAAG,GAEzC9R,KAAK8C,IAAL,sCAA0C9C,KAAKgJ,EAA/C,YAAoDhJ,KAAKiJ,EAAzD,YAA8DjJ,KAAKO,MACnEP,KAAK+R,aAAL,WAAwB/R,KAAKgJ,EAA7B,YAAkChJ,KAAKiJ,EAAvC,YAA4CjJ,KAAKsR,UAEjDtR,KAAKoI,OAAS,kBACZ,IAAI5B,IAAEwL,aACJjJ,EAAa,EAAKC,EAAG,EAAKC,GAAG,GAC7BF,EAAa,EAAKC,EAAG,EAAKC,GAAG,KAEjCjJ,KAAKiS,WAAL,mDAA8DN,EAAKL,SAAnE,QACAtR,KAAKkS,KAAO,iBAAO,CACjBpP,IAAK,EAAKA,IACVqB,MAAOwN,EAAKxN,MACZD,KACE,oCACGyN,EAAKlR,SACN,6BACCkR,EAAKQ,kBCAVC,G,MAAiCzQ,KAAI,SAACgQ,GAAD,OAAU,IAAID,GAAUC,MAEnEnL,IAAEwL,aAAaK,eAAiB,SAACC,GAC/B,MAAmCA,EAAKC,MAAM,KAAK5Q,IAAI6Q,YAAvD,mBAAOC,EAAP,KAAaC,EAAb,KAAoBC,EAApB,KAA0BC,EAA1B,KACA,OAAO,IAAIpM,IAAEwL,aACX,IAAIxL,IAAEqM,OAAOH,EAAOD,GACpB,IAAIjM,IAAEqM,OAAOD,EAAOD,KAIxB,IAAMG,GAAa,CACjB,CAAC,EAAG,GACJ,CLjCqB,SAACV,GAAD,OACrB9K,EAAEyL,IAAIX,EAAazQ,KAAI,SAACqR,GAAD,OAAOxH,SAASwH,EAAE/J,EAAG,QAAQ,EKgCnDgK,CAAQb,IAAgB5K,ELnCJ,SAAC4K,GAAD,OACrB9K,EAAEyL,IAAIX,EAAazQ,KAAI,SAACqR,GAAD,OAAOxH,SAASwH,EAAEhK,EAAG,QAAQ,EKkCfkK,CAAQd,IAAgB3K,IASzD0L,G,kDACJ,WAAYlU,GAAQ,IAAD,uBACjB,cAAMA,IAEDmU,YAAcC,KAAKC,MAExB3O,YAAW,kBAAM,EAAK4O,gBARC,KAUvB,EAAKC,wBAA0B,SAACxK,EAAGC,EAAG1I,GAWpC,YATa+L,IAAT/L,EACW6R,GAAapC,QAAO,SAACxF,GAAD,OAAOA,EAAEjK,OAASA,KAAM,QAC1C+L,IAANtD,QAAyBsD,IAANrD,EACfmJ,GAAapC,QAAO,SAACxF,GAAD,OAAOA,EAAEiJ,iBAAe,GAE5CrB,GAAapC,QACxB,SAACxF,GAAD,OAAOA,EAAExB,IAAMwC,SAASxC,EAAG,KAAOwB,EAAEvB,IAAMuC,SAASvC,EAAG,OACtD,IAKN,EAAKyK,YAAc,WAEjB,IAAM5M,EAAS,EAAKzH,MAAMsU,aAAavL,SAAS0B,YAChD,OAAOtD,IAAEoN,OAAO9M,EAAO6B,IAAM,IAAK7B,EAAO2B,IAAM,MAGjDjC,IAAEqN,IAAIC,QAAQtN,IAAEuN,iBAEhB,MAAuB9U,EAAM+U,MAAMC,OAA3BjL,EAAR,EAAQA,EAAGC,EAAX,EAAWA,EAAG1I,EAAd,EAAcA,KA7BG,OA8BjB,EAAKlB,MAAQ,CACX6U,cAAc,EACdC,aAAa,EACbC,cAAe,EACfT,aAAc,EAAKH,wBAAwBxK,EAAGC,EAAG1I,GACjD8T,aAAc,EAAKb,wBAAwBxK,EAAGC,EAAG1I,IAGnD,EAAK2K,aAAe,YAGd,EAAK7L,MAAM8U,aAAgB,EAAK9U,MAAM6U,aAKrC,EAAK7U,MAAM8U,YAKZ,EAAK9U,MAAM6U,cAAgB,EAAK7U,MAAM+U,cAAgB,GACxDzP,YAAW,WACT,EAAK/E,UAAS,SAACO,GACb,OAAIA,EAAU+T,aACL,CAAEA,cAAc,GAElB,UAER,KAZH,EAAKtU,SAAS,CAAEuU,aAAa,IAL7B,EAAK9U,MAAMsC,IAAI+C,oBAAoB,OAAQ,EAAKwG,eAqBpD,EAAK+E,cAAgB,SAACoE,GACpB,EAAKzU,UAAS,SAACO,GACb,IAAIsQ,IAAQtQ,EAAUkU,aAAcA,GAIpC,OADA9Q,QAAQC,MAAM,qBAAsB6Q,EAAavR,KAC1C,CAAEuR,oBAIb,EAAKC,UAAY,YAAyB,IAAtB5G,EAAqB,EAArBA,eAClB,EAAK9N,SAAS,CACZ+B,IAAK+L,EACLwG,cAAc,EACdzK,UAAWP,IAAeO,aAI9B,EAAK8K,kBAAoB,SAACC,GACxB,IAAMJ,EAAgBxC,OAAO6C,KAAKD,GAAQE,OAC1C,EAAK9U,SAAS,CAAEwU,mBAnFD,E,0CAuFnB,WACE,IAAM1T,EAAQiU,IAAYC,MAAM5U,KAAKf,MAAMwB,SAASE,QAC9CwQ,IAAYzQ,EAAMyQ,QAEpB0D,EAAe,iCACc,IAA7B7U,KAAKX,MAAM+U,gBACbS,EAAe,sBACX1D,EACF0D,EAAe,0BACNxB,KAAKC,MAAQtT,KAAKoT,YAnGR,MAoGnByB,EACE,yBAAKhU,UAAU,sBACb,0BACEiU,KAAK,MACL3T,aAAW,UACXN,UAAU,4BAHZ,gBAOA,6BARF,oDAUE,6BAVF,sCAgBN,IAAIkU,EAAa,CACf5Q,MAAO,qBACP6Q,YACE,0LACFC,MAAO,0DAST,OAPIjV,KAAKX,MAAMgV,eAAiBrU,KAAKX,MAAMgV,aAAaZ,gBACtDsB,EAAa,CACX5Q,MAAM,GAAD,OAAKnE,KAAKX,MAAMgV,aAAalQ,MAA7B,yBACL8Q,MAAOjV,KAAKX,MAAMgV,aAAapC,WAC/B+C,YAAahV,KAAKX,MAAMgV,aAAa5T,WAIvC,oCACE,kBAACyU,EAAA,OAAD,KACE,0BAAM7H,KAAK,gBAAgBtO,QAASgW,EAAW5Q,QAC/C,0BAAMkJ,KAAK,sBAAsBtO,QAASgW,EAAWC,cACrD,0BAAM3H,KAAK,gBAAgBtO,QAASgW,EAAWE,QAC/C,0BAAME,SAAS,WAAWpW,QAASgW,EAAW5Q,QAC9C,0BAAMgR,SAAS,iBAAiBpW,QAASgW,EAAWC,cACpD,0BAAMG,SAAS,WAAWpW,QAASgW,EAAWE,SAEhD,kBAAC,EAAD,CACEhT,QAASjC,KAAKX,MAAM6U,aACpBxS,YAAa1B,KAAKf,MAAMyC,aAEvBmT,IAED7U,KAAKf,MAAMqB,QACX,kBAACuT,EAAA,EAAD,CACExT,IAAI,MACJ+U,IAAK5O,IAAEuD,IAAIC,OACXqL,aAAclE,EACdmE,SAAU,EACVC,UAAW,IACXC,KAAMtM,IAAeK,SACrBD,QAASJ,IAAeI,QACxBE,QAASN,IAAeM,QACxB1C,OAAQ9G,KAAK0T,cACb+B,iBAAkB,IAClBC,OAAQ1V,KAAKkL,aACbyK,UAAW7C,GACX8C,oBAAoB,EACpBC,oBAAoB,EACpBxO,IAAKrH,KAAKsU,WAEV,kBAAC,GAAD,CACEnD,QAASA,EACT3N,MAAO9C,EAAM8C,MACb8L,YAAa5O,EAAM4O,YACnBwG,mBAAoBpV,EAAMqV,QAC1BxE,gBAAiB7Q,EAAMsV,WACvBjG,YAAaqC,GACbnC,cAAejQ,KAAKiQ,cACpBG,oBAAqBpQ,KAAKuU,kBAC1B9K,UAAWzJ,KAAKX,MAAMoK,UACtB9H,IAAK3B,KAAKX,MAAMsC,MAElB,kBAAC,GAAD,CACEA,IAAK3B,KAAKX,MAAMsC,IAChB2D,OAAQtF,KAAKX,MAAM6U,aACnB1Q,MAAO9C,EAAM8C,MACbuH,QAASrK,EAAM2J,SAIpBrK,KAAKX,MAAMgV,cAAgBrU,KAAKX,MAAM+U,cAAgB,GACrD,kBAAC,EAAD,eACE9T,QAAQ,GACJN,KAAKX,MAAMgV,aAAanC,OAF9B,CAGExQ,YAAa1B,KAAKf,MAAMyC,oB,GA1LbI,IAAMC,WAmM7BoR,GAAS8C,aAAe,CAAE3V,QAAQ,GAEnB4V,mBAAW/C,IChPpBgD,I,OAAmB,SAAC,GAAkB,IAAhBjU,EAAe,EAAfA,SAwBpBkU,EAAoBtU,IAAMuU,SAAS1U,IAAIO,GAvBrB,SAAlBoU,EAAmBC,GACvB,OAAKzU,IAAM0U,eAAeD,GAIP,MAAfA,EAAM3T,MAAgB2T,EAAMtX,MAAM2B,KAE7B2V,EAAMtX,MAAMiD,SAGjBqU,EAAMtX,MAAMiD,SAEPJ,IAAM2U,aAAaF,EAAnB,6BACFA,EAAMtX,OADJ,IAELiD,SAAUJ,IAAMuU,SAAS1U,IAAI4U,EAAMtX,MAAMiD,SAAUoU,MAKhDC,EAjBEA,KAuBX,OAAO,oCAAGH,KAeGM,GAZF,SAACzX,GACZ,OACE,yBAAK4B,UAAWY,IAAW,OAAQxC,EAAMH,KAAMG,EAAMyC,cACnD,yBAAKb,UAAU,WACb,kBAAC4B,EAAD,KAASxD,EAAMiD,UACf,kBAACK,EAAD,KACE,kBAAC,GAAD,KAAmBtD,EAAMiD,cC4MpByU,GAhPD,SAAC1X,GACb,IAAMgB,EAAO,oBAEb,OACE,kBAAC,GAAD,CAAMyB,YAAazC,EAAMyC,aAGvB,kBAACwT,EAAA,OAAD,KACE,0BAAM7H,KAAK,gBAAgBtO,QAAO,+BAA0BkB,KAC5D,0BAAMkV,SAAS,WAAWpW,QAAO,+BAA0BkB,KAC3D,0BACEoN,KAAK,sBACLtO,QAAQ,qHAEV,0BACEoW,SAAS,iBACTpW,QAAQ,qHAEV,0BACEsO,KAAK,gBACLtO,QAAQ,2DAEV,0BACEoW,SAAS,WACTpW,QAAQ,4DAIZ,4BAAKkB,GAEL,2BACE,kDADF,kFAE8C,IAC5C,uBAAGW,KAAK,4BAAR,iBAHF,4HAQA,yUAKO,kDALP,iLAUA,8LAGwB,IACtB,uBAAGA,KAAK,sCAAR,8BAJF,KAOI,kDAPJ,4IAYA,sEAC2C,IACzC,uBAAGA,KAAK,oCAAR,qBAFF,KAKA,yBAAKC,UAAU,WACb,yEAC8C,IAC5C,kDAFF,UAEqC,IACnC,uBAAGD,KAAK,iCAAR,0BAHF,MAOF,8CAEA,2BACE,uBAAGA,KAAK,4BAAR,iBADF,+QAQA,qaASA,gCACE,yBACEM,IAAI,6CACJG,IAAI,8BAEN,0GAKF,uXASA,kBAACoB,EAAD,KACE,yBAAK5B,UAAU,kBACb,4BAAQA,UAAU,eAAeiU,KAAK,SACpC,gCACE,4BACE3Q,MAAM,uCACNtD,UAAU,gBACVK,IAAI,4CACJ0V,YAAY,IACZC,MAAM,0EACNC,iBAAe,IAEjB,2IAMF,yBAAKjW,UAAU,UAAUgD,cAAY,QAArC,sGAKA,gCACE,4BACEM,MAAM,uCACNtD,UAAU,gBACVK,IAAI,4CACJ0V,YAAY,IACZC,MAAM,0EACNC,iBAAe,IAEjB,0JAMF,yBAAKjW,UAAU,UAAUgD,cAAY,QAArC,qHAKA,gCACE,4BACEM,MAAM,oCACNtD,UAAU,gBACVK,IAAI,4CACJ0V,YAAY,IACZC,MAAM,0EACNC,iBAAe,IAEjB,kKAMF,yBAAKjW,UAAU,UAAUgD,cAAY,QAArC,6HAKA,gCACE,4BACEM,MAAM,0CACNtD,UAAU,gBACVK,IAAI,4CACJ0V,YAAY,IACZC,MAAM,0EACNC,iBAAe,IAEjB,wRAQF,yBAAKjW,UAAU,UAAUgD,cAAY,QAArC,mPAOA,gCACE,4BACEM,MAAM,yCACNtD,UAAU,gBACVK,IAAI,4CACJ0V,YAAY,IACZC,MAAM,0EACNC,iBAAe,IAEjB,2RAQF,yBAAKjW,UAAU,UAAUgD,cAAY,QAArC,yPAUN,yBAAKhD,UAAU,cACb,2BACE,oVCqMKkW,GAzaU,SAAC9X,GACxB,IAAMgB,EAAO,mBAEb,OACE,kBAAC,GAAD,CAAMyB,YAAazC,EAAMyC,aAGvB,kBAACwT,EAAA,OAAD,KACE,0BAAM7H,KAAK,gBAAgBtO,QAAO,+BAA0BkB,KAC5D,0BAAMkV,SAAS,WAAWpW,QAAO,+BAA0BkB,KAC3D,0BACEoN,KAAK,sBACLtO,QAAQ,uGAEV,0BACEoW,SAAS,iBACTpW,QAAQ,uGAEV,0BACEsO,KAAK,gBACLtO,QAAQ,2DAEV,0BACEoW,SAAS,WACTpW,QAAQ,4DAIZ,4BAAKkB,GAEL,2BACE,oeASA,6BAVF,UAUU,uBAAGW,KAAK,4BAAR,iBAVV,eAU2E,IACzE,mDAEF,6BACA,2BACE,6DAGF,2BACE,gCACE,uBAAGA,KAAK,2DAAR,oEAIF,6BANF,8pBAmBA,2BACE,gCACE,uBAAGA,KAAK,4BAAR,iBAEF,6BAJF,4OAWA,2BACE,gCACE,uBAAGA,KAAK,6BAAR,kBAEF,6BAJF,0CAKyC,kDALzC,yIAUA,2BACE,uDACA,6BAFF,gGAIwB,IACtB,uBAAGA,KAAK,iFAAR,qBAEK,IAPP,4NAcA,2BACE,oDACoB,IAClB,uBAAGA,KAAK,oCAAR,YAEF,6BALF,uFAOgB,IACd,uBAAGA,KAAK,yDAAR,kBARF,icAiBuC,IACrC,uBAAGA,KAAK,4EAAR,4BAEK,IApBP,mHAyBA,2BACE,gCACE,uBAAGA,KAAK,mDAAR,gBAIF,6BANF,0lBAkBA,2BACE,gCACE,uBAAGA,KAAK,6CAAR,iBAEF,6BAJF,4UASkD,IAChD,uBAAGA,KAAK,gFAAR,yBAVF,KAgBA,2BACE,gCACE,uBAAGA,KAAK,+BAAR,wCAIF,6BANF,2eAgBA,2BACE,mDACA,6BAFF,kLAKsC,IACpC,uBAAGA,KAAK,0CAAR,8BAEK,IARP,kPAeA,2BACE,gCACE,uBAAGA,KAAK,kDAAR,sCAIF,6BANF,mGAWA,2BACE,gCACE,uBAAGA,KAAK,gCAAR,oBADF,IAC+D,IAC7D,uBAAGA,KAAK,uEAAR,qBAFF,oBAOA,6BARF,wRAYoE,IAClE,uBAAGA,KAAK,oCAAR,oBAbF,kGAkBA,2BACE,gCACE,uBAAGA,KAAK,gDAAR,eADF,oBAEoB,IAClB,uBAAGA,KAAK,qCAAR,iBAEF,6BANF,6LAYA,2BACE,gCACE,uBAAGA,KAAK,yBAAR,gBAEF,6BAJF,gPAWA,2BACE,gCACE,uBAAGA,KAAK,mDAAR,iBAIF,6BANF,4KAYA,2BACE,gCACE,uBAAGA,KAAK,kCAAR,gBAEF,6BAJF,sMAUA,2BACE,gCACE,uBAAGA,KAAK,kDAAR,oBAIF,6BANF,6FAWA,2BACE,gCACE,uBAAGA,KAAK,+DAAR,gBAIF,6BANF,0HAWA,2BACE,gCACE,uBAAGA,KAAK,mCAAR,gBAEF,6BAJF,+HASA,2BACE,gCACE,uBAAGA,KAAK,6BAAR,gBAEF,6BAJF,8MAUA,2BACE,gCACE,uBAAGA,KAAK,kCAAR,oBAEF,6BAJF,qFASA,2BACE,gCACE,uBAAGA,KAAK,oCAAR,iBADF,OACmE,IACjE,uBAAGA,KAAK,mCAAR,uBAEF,6BALF,wEAMwE,IACtE,uBAAGA,KAAK,sCAAR,mBAAiE,IAPnE,YAWA,2BACE,gCACE,uBAAGA,KAAK,6BAAR,mBAEF,6BAJF,2EAQA,2BACE,gCACE,uBAAGA,KAAK,oDAAR,iBAIF,6BANF,+FAWA,2BACE,gCACE,uBAAGA,KAAK,qCAAR,kBAEF,6BAJF,wEAQA,2BACE,gCACE,uBAAGA,KAAK,oDAAR,mBAIF,6BANF,wEAUA,2BACE,oEACA,6BAFF,yGAIqC,IACnC,uBAAGA,KAAK,qDAAR,0BAEK,IAPP,0BAWA,2BACE,gCACE,uBAAGA,KAAK,wBAAR,gBAEF,6BAJF,2HASA,2BACE,gCACE,uBAAGA,KAAK,wCAAR,oBAEF,6BAJF,oNAUA,2BACE,mEACA,6BAFF,qIAOA,2BACE,sFACA,6BAFF,ulCCzYeoW,I,yDACnB,WAAY/X,GAAQ,IAAD,8BACjB,cAAMA,IAEDI,MAAQ,CACX4X,SAAS,EACTvV,YjBdyB,SiBcIoQ,MAAM,IALpB,E,qDASnB,WAAqB,IAAD,OAGlB,GAFgBtR,OAAOC,SAASF,OAEhB3B,EAAgB,CAC9B,IAAM8C,EAAc9C,EAAekT,MAAM,GACzC9R,KAAKJ,SAAS,CAAE8B,gBAChBjC,SAAS8E,KAAKC,UAAUC,IAAI/C,GAG9BlB,OAAOmE,YAAW,WAChB,EAAK/E,SAAS,CAAEqX,SAAS,MACxB,O,oBAGL,WACE,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CACEC,KAAK,UACLC,UAAW,WAGT,OAFA3W,OAAOC,SAASG,KACd,sDACK,QAIX,kBAAC,IAAD,CAAOsW,KAAK,UACV,kBAAC,EAAD,CAAMjX,KAAK,QAAQyB,YAAa1B,KAAKX,MAAMqC,cAC3C,kBAAC,GAAD,CAAOA,YAAa1B,KAAKX,MAAMqC,eAEjC,kBAAC,IAAD,CAAOwV,KAAK,WACV,kBAAC,EAAD,CAAMjX,KAAK,SAASyB,YAAa1B,KAAKX,MAAMqC,cAC5C,kBAAC,GAAD,CAAkBA,YAAa1B,KAAKX,MAAMqC,eAE5C,kBAAC,IAAD,CAAOwV,KAAK,mBACV,kBAAC,EAAD,CAAMjX,KAAK,OAAOyB,YAAa1B,KAAKX,MAAMqC,cAC1C,kBAAC,GAAD,CACEpB,OAAQN,KAAKX,MAAM4X,QACnBvV,YAAa1B,KAAKX,MAAMqC,qB,GAjDLI,IAAMC,YCCnBqV,QACW,cAA7B5W,OAAOC,SAAS4W,UAEe,UAA7B7W,OAAOC,SAAS4W,UAEhB7W,OAAOC,SAAS4W,SAASrD,MACvB,2DCdNsD,IAASC,OAAO,kBAAC,GAAD,MAAS9X,SAAS+X,eAAe,SD6H3C,kBAAmBrU,WACrBA,UAAUsU,cAAcC,MAAMpU,MAAK,SAACqU,GAClCA,EAAaC,iB","file":"static/js/main.a4fe5210.chunk.js","sourcesContent":["export const TRANSITION_SPEED = 300;\nexport const MOBILE_BREAKPOINT = 1120; // match in shared.scss\n\nexport const DARK_MODE_HASH = \"#dark\";\nexport const LIGHT_MODE_HASH = \"#light\";\n","import React from \"react\";\nimport classNames from \"classnames\";\n\nimport { CSSTransition } from \"react-transition-group\";\nimport { TRANSITION_SPEED, MOBILE_BREAKPOINT } from \"../constants\";\n\nimport \"./Menu.scss\";\n\nconst menuData = [\n  { slug: \"anchor\", content: \"Life Under the Ice\" },\n  { slug: \"home\", content: \"Home\" },\n  { slug: \"about\", content: \"About the Project\" },\n  { slug: \"thanks\", content: \"Acknowledgements\" },\n];\n\nexport default class Menu extends React.Component {\n  static isMobile() {\n    return window.innerWidth <= MOBILE_BREAKPOINT;\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selected: \"\",\n      open: false,\n      tabKeyPress: false,\n      navigatingMap: false,\n    };\n  }\n\n  componentDidMount() {\n    this.setState({ selected: this.props.page });\n  }\n\n  handleMenuClick(e, slug) {\n    switch (slug) {\n      case \"anchor\":\n        if (!Menu.isMobile()) {\n          this.setState({ selected: \"home\" });\n          return;\n        }\n\n        e.preventDefault();\n        this.setState((prevState) => ({ open: !prevState.open }));\n        break;\n\n      default:\n        this.setState({ selected: slug });\n    }\n  }\n\n  handleKeyUp = (e) => {\n    if (e.which !== 9) return;\n    if (this.state.open) return;\n    if (Menu.isMobile()) return;\n\n    let focusTarget;\n    if (!this.state.tabKeyPress) {\n      if (this.state.navigatingMap && e.shiftKey) {\n        focusTarget = document.getElementsByClassName(\"anchor\");\n        focusTarget[0].focus();\n      }\n\n      this.setState({ tabKeyPress: true });\n      return;\n    }\n\n    if (Menu.isMobile() && this.state.tabKeyPress) {\n      // this is a 2nd consecutive tab press\n      focusTarget = document.getElementsByClassName(\"leaflet-container\");\n      focusTarget[0].focus();\n\n      this.setState({ tabKeyPress: false, navigatingMap: true });\n    }\n  };\n\n  getAriaLabel() {\n    if (this.state.open) {\n      return \"lose the menu\";\n    }\n    return \"open the menu\";\n  }\n\n  hidden(slug) {\n    if (this.state.open || slug === \"anchor\") return null;\n\n    return true;\n  }\n\n  renderItem(menuItem, key) {\n    const { slug, content } = menuItem;\n    const hidden = this.hidden(slug) ? \"hidden\" : \"\";\n    const hash = window.location.hash;\n    const query = window.location.search;\n\n    const href =\n      slug === \"home\" || slug === \"anchor\"\n        ? `/${query}${hash}`\n        : `/${slug}${query}${hash}`;\n\n    let selected = slug === this.state.selected ? \"selected\" : \"\";\n\n    if (slug === \"anchor\" && this.state.selected === \"home\") {\n      selected = \"selected\";\n    }\n\n    return (\n      <li key={key} className={`${selected} ${hidden} ${slug}`}>\n        <div className=\"menu-item-wrapper\">\n          <span className=\"menu-link\">\n            <a\n              href={href}\n              className={slug}\n              onClick={(e) => {\n                this.handleMenuClick(e, slug);\n              }}\n              onKeyUp={this.handleKeyUp}\n            >\n              {this.renderIcon(key)}\n              {content}\n            </a>\n          </span>\n        </div>\n      </li>\n    );\n  }\n\n  renderIcon(key) {\n    if (key !== 0) return null;\n\n    return (\n      <span className=\"icon-wrapper\">\n        <img\n          className=\"menu-toggle\"\n          src=\"/LUTI_hamburger.svg\"\n          aria-label={this.getAriaLabel()}\n          alt=\"\"\n        />\n      </span>\n    );\n  }\n\n  render() {\n    return (\n      <nav>\n        <CSSTransition in={this.state.open} timeout={TRANSITION_SPEED}>\n          <ul className={classNames(\"menu\", this.props.displayMode)}>\n            {menuData.map((menuItem, key) => this.renderItem(menuItem, key))}\n          </ul>\n        </CSSTransition>\n      </nav>\n    );\n  }\n}\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { CSSTransition } from \"react-transition-group\";\nimport { TRANSITION_SPEED } from \"../constants\";\n\nimport \"./Intro.scss\";\n\nexport default function Intro(props) {\n  return (\n    <div className=\"intro\">\n      <CSSTransition in={props.visible} timeout={TRANSITION_SPEED}>\n        <h2\n          className={classNames(props.displayMode, { hidden: !props.visible })}\n        >\n          {props.children}\n        </h2>\n      </CSSTransition>\n    </div>\n  );\n}\n","import { useMemo } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nexport const isOffline = () => {\n  const query = window.location.search;\n  return !!new URLSearchParams(query).get(\"offline\");\n};\n\nfunction useQuery() {\n  const { search } = useLocation();\n\n  return useMemo(() => new URLSearchParams(search), [search]);\n}\n\nexport const Offline = ({ children }) => {\n  const offline = !!useQuery().get(\"offline\");\n  if (offline) {\n    return children;\n  }\n  return null;\n};\nexport const Online = ({ children }) => {\n  const offline = !!useQuery().get(\"offline\");\n  if (offline) {\n    return null;\n  }\n  return children;\n};\n","import React from \"react\";\n\nimport \"./InfoButton.scss\";\n\nexport default function InfoButton({ displayMode, handleClick }) {\n  const img =\n    displayMode === \"dark\" ? \"/LUTI_WhatsThis5.svg\" : \"/LUTI_WhatsThis5.svg\"; // todo: update with dark mode svg\n\n  const ariaLabel = \"What's this?\";\n\n  return (\n    <button type=\"button\" className=\"info-button\" onClick={handleClick}>\n      <img className=\"info-toggle\" src={img} aria-label={ariaLabel} alt=\"\" />\n    </button>\n  );\n}\n","import React from \"react\";\n\n// import \"./InfoButton.scss\";\n\nexport default function ShareButtons({ url }) {\n  const message =\n    \"Woah! Check out this microscopic creature I found on Life Under The Ice:\";\n  const encodedMessage = encodeURIComponent(message);\n  const encodedURI = encodeURIComponent(url);\n  const shareClick = () => {\n    navigator\n      .share({\n        text: message,\n        url,\n      })\n      .then(() => {\n        console.debug(\"Thanks for sharing!\");\n      })\n      .catch(console.error);\n  };\n\n  if (navigator.share) {\n    return (\n      <div className=\"share-links-mobile\">\n        <button type=\"button\" onClick={shareClick}>\n          Share this\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"share-links\">\n      <a\n        className=\"resp-sharing-button__link\"\n        href={`https://facebook.com/sharer/sharer.php?u=${encodedURI}&title=${encodedMessage}`}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        aria-label=\"\"\n      >\n        <div className=\"resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small\">\n          <div\n            aria-hidden=\"true\"\n            className=\"resp-sharing-button__icon resp-sharing-button__icon--solid\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n              <path d=\"M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z\" />\n            </svg>\n          </div>\n        </div>\n      </a>\n\n      <a\n        className=\"resp-sharing-button__link\"\n        href={`https://twitter.com/intent/tweet/?text=${encodedMessage}&url=${encodedURI}`}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        aria-label=\"\"\n      >\n        <div className=\"resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small\">\n          <div\n            aria-hidden=\"true\"\n            className=\"resp-sharing-button__icon resp-sharing-button__icon--solid\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n              <path d=\"M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z\" />\n            </svg>\n          </div>\n        </div>\n      </a>\n\n      <a\n        className=\"resp-sharing-button__link\"\n        href={`mailto:?subject=${encodedMessage}&body=${encodedURI}`}\n        target=\"_self\"\n        rel=\"noopener\"\n        aria-label=\"\"\n      >\n        <div className=\"resp-sharing-button resp-sharing-button--email resp-sharing-button--small\">\n          <div\n            aria-hidden=\"true\"\n            className=\"resp-sharing-button__icon resp-sharing-button__icon--solid\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n              <path d=\"M22 4H2C.9 4 0 4.9 0 6v12c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17 0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1 0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08 0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z\" />\n            </svg>\n          </div>\n        </div>\n      </a>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport classNames from \"classnames\";\nimport PropTypes from \"prop-types\";\nimport { CSSTransition } from \"react-transition-group\";\nimport { Online } from \"../Offline\";\n\nimport InfoButton from \"./InfoButton\";\nimport ShareButtons from \"./ShareButtons\";\n\nimport \"./InfoBox.scss\";\n\nconst TRANSITION_SPEED = 500;\n\nexport default function InfoBox({ desc, displayMode, title, url }) {\n  const [hidden, setHidden] = useState(true);\n\n  useEffect(() => {\n    const body = document.body;\n    body.classList.add(\"overflow-hidden\");\n\n    const map = document.getElementsByClassName(\"leaflet-container\")[0];\n\n    const handleClick = () => {\n      setHidden(!hidden);\n    };\n\n    if (hidden) {\n      map.removeEventListener(\"click\", handleClick);\n      map.removeEventListener(\"touchstart\", handleClick);\n      map.removeEventListener(\"touchmove\", handleClick);\n      return;\n    }\n\n    window.setTimeout(() => {\n      map.addEventListener(\"click\", handleClick);\n      map.addEventListener(\"touchstart\", handleClick);\n      map.addEventListener(\"touchmove\", handleClick);\n    }, 100);\n  }, [hidden]);\n\n  return (\n    <CSSTransition in={!hidden} timeout={TRANSITION_SPEED}>\n      <div>\n        <InfoButton\n          displayMode={displayMode}\n          handleClick={() => setHidden(!hidden)}\n        />\n        <div className={classNames(\"info-wrapper\", displayMode)}>\n          <div className=\"info-title\">\n            <h1>{title}</h1>\n          </div>\n          <div className=\"info-description\">{desc}</div>\n          <Online>\n            <ShareButtons url={url} />\n          </Online>\n        </div>\n      </div>\n    </CSSTransition>\n  );\n}\n\nInfoBox.propTypes = {\n  title: PropTypes.string.isRequired,\n  desc: PropTypes.node.isRequired,\n  url: PropTypes.string.isRequired,\n};\n","import L from \"leaflet\";\nimport { Marker, Circle } from \"react-leaflet\";\nimport React from \"react\";\n\nconst mp3_source_prefix = \"https://lifeundertheice-audio.s3.amazonaws.com/\";\n\nexport default class Sound extends React.Component {\n  componentDidUpdate(prevProps) {\n    if (this.props.paused !== prevProps.paused && !this.props.paused) {\n      if (this.audio) {\n        console.log(\"RESUME PLAY\");\n        this.audio.play();\n      }\n    }\n\n    if (this.gain) {\n      if (this.gain.gain.value === this.props.volume) {\n        return;\n      }\n      if (this.props.volume > 0) {\n        this.gain.gain.exponentialRampToValueAtTime(\n          this.props.volume,\n          this.props.audioContext.currentTime + 1 / 50.0\n        );\n      } else {\n        this.gain.gain.value = 0;\n      }\n    }\n  }\n\n  setupAudio = (mp3) => (audio) => {\n    if (!audio) return;\n    if (this.track) return;\n\n    this.audio = audio;\n    this.audio.crossOrigin = \"anonymous\";\n    this.audio.src = mp3_source_prefix + mp3;\n    this.audio.loop = true;\n    this.audio.autoplay = true;\n    if (!this.props.paused) {\n      console.log(\"INIT PLAY\");\n      this.audio.play();\n    }\n\n    this.track = this.props.audioContext.createMediaElementSource(audio);\n    this.gain = this.props.audioContext.createGain();\n    this.pan = this.props.audioContext.createStereoPanner();\n\n    this.track\n      .connect(this.gain)\n      .connect(this.pan)\n      .connect(this.props.analyser)\n      .connect(this.props.audioContext.destination);\n\n    this.applyAudioSettings();\n  };\n\n  applyAudioSettings = () => {\n    this.gain.gain.value = this.props.volume;\n  };\n\n  render() {\n    const text = L.divIcon({\n      html: `<div class=\"sound-debug\">${this.props.file}</div>`,\n      iconSize: \"auto\",\n    });\n\n    return (\n      <>\n        {this.props.debug && (\n          <>\n            <Circle\n              key={`sound-${this.props.location[0]}-${this.props.location[1]}`}\n              center={this.props.location}\n              color={this.props.color}\n              radius={this.props.volume * 600}\n            />\n            <Marker position={this.props.location} icon={text} />\n          </>\n        )}\n        <audio\n          id={`audio-${this.props.file}`}\n          key={`audio-${this.props.file}`}\n          ref={this.setupAudio(this.props.file)}\n          loop\n        />\n      </>\n    );\n  }\n}\n","const _ = require(\"lodash\");\n\nexport const img_height = 1080;\nexport const img_width = 1920;\n\nexport const x_count = (video_layout) =>\n  _.max(video_layout.map((l) => parseInt(l.x, 10))) + 1;\nexport const y_count = (video_layout) =>\n  _.max(video_layout.map((l) => parseInt(l.y, 10))) + 1;\n\nexport const base_url = \"https://lifeundertheice.s3.amazonaws.com/\";\nexport const offline_url = \"http://localhost:50050/videos/\";\nexport const cloudfront_base_url = \"https://d30lzybxi44477.cloudfront.net/\";\n\nexport const init_zoom = -1.6;\n\nexport const hls_config = {\n  debug: false,\n  enableWorker: true,\n  capLevelToPlayerSize: true,\n  maxBufferSize: 30,\n  maxBufferLength: 5,\n};\n\nexport const vid_config = {\n  muted: true,\n  autoplay: true,\n  playsinline: true,\n  loop: true,\n  controls: true,\n};\n\nexport const style = { height: `${img_height}px`, width: `${img_width}px` };\n\nexport const bounds_to_xy = (bounds) => {\n  return {\n    x_bottom_left: Math.floor(bounds.getSouthWest().lng / (img_width - 1)),\n    y_bottom_left: Math.floor(bounds.getSouthWest().lat / (img_height - 1)),\n    x_top_right: Math.floor(bounds.getNorthEast().lng / (img_width - 1)),\n    y_top_right: Math.floor(bounds.getNorthEast().lat / (img_height - 1)),\n  };\n};\n\nexport const xy_to_bounds = (x, y) => {\n  return [\n    [(y + 0) * (img_height - 1), (x + 0) * (img_width - 1)],\n    [(y + 1) * (img_height + 0), (x + 1) * (img_width + 0)],\n  ];\n};\n\nexport const zoomSettings = () => {\n  const screenPixels = window.screen.width * window.screen.height;\n  const isMobile = screenPixels < 450 * 900; // bigger than an iPhone X Max\n  if (isMobile) {\n    return {\n      minZoom: -1.5,\n      initZoom: -1.01,\n      maxZoom: 0.1,\n      boundsPad: 0.1,\n    };\n  }\n  return {\n    minZoom: -0.85,\n    initZoom: -0.6,\n    maxZoom: -0.1,\n    boundsPad: 0.25,\n  };\n};\n","import React from \"react\";\nimport Control from \"react-leaflet-control\";\nimport L from \"leaflet\";\nimport { tsv } from \"d3-fetch\";\nimport throttle from \"lodash/throttle\";\nimport Sound from \"./Sound\";\nimport { xy_to_bounds } from \"./vid_config\";\n\nconst debug_sound_source =\n  \"https://docs.google.com/spreadsheets/d/e/2PACX-1vQbyxIWPplJbfSWBRfpSNmho-6LcS1xgEWd8VRLAn3R1dkvWQP3-OHLrFuA4_NgeMk9y3JKzkWzMwWW/pub?gid=0&single=true&output=tsv\";\n\nexport default class Sounds extends React.Component {\n  constructor(props) {\n    super(props);\n    if (!this.props.enabled) {\n      return;\n    }\n    this.state = {\n      sounds: [],\n      volume: {},\n    };\n    this.latlngs = {};\n    this.analysers = {};\n    const AudioContext = window.AudioContext || window.webkitAudioContext;\n    this.audioContext = new AudioContext();\n\n    const handleOnMove = () => {\n      this.calculateAudioPositions();\n    };\n    this.handleOnMove = throttle(handleOnMove, 50, {\n      leading: true,\n      trailing: true,\n    });\n  }\n\n  componentDidMount() {\n    if (!this.props.enabled) {\n      return;\n    }\n    this.mounted = true;\n    tsv(debug_sound_source, (sound) => {\n      const bounds = xy_to_bounds(parseInt(sound.X, 10), parseInt(sound.Y, 10));\n      const llb = L.latLngBounds(bounds);\n      this.latlngs[sound.File] = llb.getCenter();\n      console.log(\"XY\", sound.X, sound.Y, bounds);\n      this.setState((prevState) => ({\n        sounds: [...prevState.sounds, sound],\n      }));\n    });\n    this.setState({ paused: this.props.paused });\n    if (this.props.map) {\n      this.props.map.addEventListener(\"move\", this.handleOnMove);\n      this.handleOnMove();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.paused !== prevProps.paused) {\n      setTimeout(() => {\n        if (this.audioContext) {\n          console.log(\"RESUME AUDIO\");\n          this.audioContext.resume();\n          this.setState({ paused: false });\n        }\n      }, 100);\n    }\n  }\n\n  calculateAudioPositions = () => {\n    if (!this.props.map) {\n      return;\n    }\n\n    const volume = {};\n    const bounds = this.props.map.getBounds().pad(0.1);\n    const center = bounds.getCenter();\n    const radius = L.CRS.Simple.distance(bounds.getNorthWest(), center);\n    this.state.sounds.forEach((sound) => {\n      const location = this.latlngs[sound.File];\n      let v = Math.abs(L.CRS.Simple.distance(center, location)) / radius;\n      if (v > 1) {\n        v = 1;\n      }\n      if (v < 0) {\n        v = 0;\n      }\n      volume[this.keyForSound(sound)] = 1 - v;\n    });\n    this.setState({ volume });\n  };\n\n  keyForSound = (sound) => {\n    console.log(this.latlngs);\n    const location = this.latlngs[sound.File];\n    return `sound-${location.lat}-${location.lng}`;\n  };\n\n  analyserForSound = (sound) => {\n    const key = this.keyForSound(sound);\n    if (!(key in this.analysers)) {\n      const analyser = this.audioContext.createAnalyser();\n      analyser.fftSize = 32;\n      this.analysers[key] = analyser;\n    }\n    return this.analysers[key];\n  };\n\n  render() {\n    if (!this.props.enabled) {\n      return null;\n    }\n    return (\n      <>\n        (this.props.debug && (\n        <Control position=\"topright\">\n          <div className=\"sound-debug\">\n            {this.state.sounds.map((sound) => (\n              <div key={`debug-${this.keyForSound(sound)}`}>\n                {sound.File}\n                <br />\n                <div\n                  style={{\n                    height: \"10px\",\n                    backgroundColor: sound.Color,\n                    width: `${\n                      (this.state.volume[this.keyForSound(sound)] || 0).toFixed(\n                        2\n                      ) * 50\n                    }px`,\n                  }}\n                >\n                  &nbsp;\n                </div>\n              </div>\n            ))}\n          </div>\n        </Control>\n        ));\n        {this.state.sounds.map((sound) => {\n          const location = this.latlngs[sound.File];\n          const key = this.keyForSound(sound);\n          return (\n            <Sound\n              debug\n              key={key}\n              audioContext={this.audioContext}\n              location={location}\n              color={sound.Color}\n              file={sound.File}\n              analyser={this.analyserForSound(sound)}\n              volume={this.state.volume[key] || 0}\n              paused={this.state.paused}\n            />\n          );\n        })}\n      </>\n    );\n  }\n}\n","import React from \"react\";\nimport { Marker, Rectangle, ImageOverlay, VideoOverlay } from \"react-leaflet\";\nimport L from \"leaflet\";\nimport Hls from \"hls.js\";\nimport { hls_config } from \"./vid_config\";\n\nconst VIDEO_EVENTS = [\n  \"playing\",\n  \"canplay\",\n  \"canplaythrough\",\n  \"play\",\n  \"loadedmetadata\",\n  \"loadeddata\",\n  \"ratechange\",\n  \"waiting\",\n  \"ended\",\n  \"pause\",\n  \"suspend\",\n  \"emptied\",\n  \"stalled\",\n];\n\nexport default class Video extends React.Component {\n  loaded = false;\n\n  enabled = false;\n\n  hls = undefined;\n\n  cachedHls = (m3u8, autocreate) => {\n    if (autocreate && this.hls === undefined) {\n      const hls = new Hls(hls_config);\n      hls.on(Hls.Events.MEDIA_ATTACHED, () => {\n        hls.loadSource(m3u8);\n        this.configureVideo(hls.media);\n      });\n      hls.on(Hls.Events.MEDIA_DETACHED, () => {\n        this.removeVideoListeners(hls.media);\n      });\n      this.hls = hls;\n    }\n    return this.hls;\n  };\n\n  addVideoListeners = (video) => {\n    VIDEO_EVENTS.forEach((name) =>\n      video.addEventListener(name, this.props.eventLogger)\n    );\n  };\n\n  removeVideoListeners = (video) => {\n    VIDEO_EVENTS.forEach((name) =>\n      video.removeEventListener(name, this.props.eventLogger)\n    );\n  };\n\n  disableVideoHls = () => {\n    const hls = this.cachedHls(this.props.m3u8, false);\n    if (hls) {\n      hls.detachMedia();\n    }\n  };\n\n  disableVideoM3u8 = (ref) => {\n    const video = ref.leafletElement.getElement();\n    this.removeVideoListeners(video);\n\n    video.pause();\n    video.removeAttribute(\"src\");\n    video.load();\n  };\n\n  /* eslint-disable no-param-reassign */\n  configureVideo = (video) => {\n    video.style.border = \"1px solid rgb(0, 0, 0, 0.0)\";\n    video.width = 1920;\n    video.height = 1080;\n    /*\n      video.poster = m3u8\n        .replace(/-playlist.m3u8/, \"-00001.png\")\n        .replace(/lifeundertheice/, \"lifeundertheice-thumbs\");\n        */\n    video.crossOrigin = \"Anonymous\";\n    video.playsInline = true;\n    video.muted = true;\n    video.loop = true;\n    video.style.objectFit = \"cover\";\n    this.addVideoListeners(video);\n  };\n  /* eslint-enable no-param-reassign */\n\n  enableVideoM3u8 = (ref) => {\n    const m3u8 = ref.props.m3u8;\n    const video = ref.leafletElement.getElement();\n\n    video.src = m3u8;\n    this.configureVideo(video);\n  };\n\n  enableVideoHls = (ref) => {\n    const m3u8 = ref.props.m3u8;\n    const video = ref.leafletElement.getElement();\n\n    this.cachedHls(m3u8, true).attachMedia(video);\n  };\n\n  enableVideo = (ref) => {\n    if (ref === null) return;\n    if (this.enabled) {\n      return;\n    }\n    this.enabled = true;\n\n    const video = ref.leafletElement.getElement();\n    this.showCanplayStatus(video, this.props.canplay);\n    if (video.tagName !== \"VIDEO\") return;\n\n    if (video.canPlayType(\"application/vnd.apple.mpegurl\")) {\n      this.enableVideoM3u8(ref);\n      console.debug(\"M3U8 ENABLE VIDEO\", video.src);\n      return;\n    }\n    if (Hls.isSupported()) {\n      this.enableVideoHls(ref);\n      console.debug(\"HLS ENABLE VIDEO\", video.src);\n      return;\n    }\n    console.debug(\"NOTHING WORKS TO ENABLE VIDEO\");\n  };\n\n  disableVideo = (ref) => {\n    if (ref === null) return;\n    if (!this.enabled) {\n      return;\n    }\n    this.enabled = false;\n\n    const video = ref.leafletElement.getElement();\n    this.showCanplayStatus(video, this.props.canplay);\n    if (video.tagName !== \"VIDEO\") return;\n    if (video.canPlayType(\"application/vnd.apple.mpegurl\")) {\n      console.debug(\"M3U8 DISABLE VIDEO\", video.src);\n      this.disableVideoM3u8(ref);\n      return;\n    }\n    if (Hls.isSupported()) {\n      console.debug(\"HLS DISABLE VIDEO\", video.src);\n      this.disableVideoHls(ref);\n      return;\n    }\n    console.debug(\"NOTHING WORKS TO DISABLE VIDEO\");\n  };\n\n  showCanplayStatus = (video, canplay) => {\n    if (canplay) {\n      video.classList.remove(\"video-loading\");\n      video.classList.add(\"video-playing\");\n    } else {\n      video.classList.add(\"video-loading\");\n      video.classList.remove(\"video-playing\");\n    }\n  };\n\n  render() {\n    if (!this.loaded) {\n      if (!this.props.visible) {\n        return null;\n      }\n      this.loaded = true;\n    }\n\n    const text = L.divIcon({\n      html: `${this.props.id} ${this.props.debugMessage}\n      <br />\n      canplay: ${this.props.canplay} bounds: ${JSON.stringify(\n        this.props.bounds\n      )} x,y: ${JSON.stringify(this.props.xy)}`,\n    });\n    const textLoc = [\n      this.props.bounds[0][0] + 1000,\n      this.props.bounds[0][1] + 100,\n    ];\n    let debugMarker = <></>;\n    if (this.props.debug) {\n      debugMarker = <Marker position={textLoc} icon={text} />;\n      return (\n        <Rectangle\n          id={this.props.id}\n          key={`${this.props.id}-rect`}\n          bounds={this.props.bounds}\n          color={this.props.visible ? \"#f00\" : \"#0f0\"}\n        >\n          {debugMarker}\n        </Rectangle>\n      );\n    }\n\n    const callback = (ref) =>\n      requestAnimationFrame(() =>\n        this.props.visible ? this.enableVideo(ref) : this.disableVideo(ref)\n      );\n\n    return (\n      <>\n        <VideoOverlay\n          {...this.props}\n          url=\"\"\n          ref={callback}\n          key={`video-${this.props.id}`}\n        >\n          {debugMarker}\n        </VideoOverlay>\n        {this.props.spinnerTest && !this.props.canplay && (\n          <ImageOverlay\n            bounds={this.props.bounds}\n            key={`image-${this.props.id}`}\n            url=\"/grey-1920x1080.png\"\n          />\n        )}\n      </>\n    );\n  }\n}\n","import React from \"react\";\n\nimport _ from \"lodash\";\n\nimport Video from \"./Video\";\n\nimport {\n  vid_config,\n  cloudfront_base_url,\n  offline_url,\n  base_url,\n  bounds_to_xy,\n  xy_to_bounds,\n} from \"./vid_config\";\n\nexport default class Videos extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.alreadyIndexedIds = {};\n    this.state = {\n      canplay: {},\n      visible: true,\n    };\n\n    this.getCenterVideo = () => {\n      if (!this.props.map) {\n        return;\n      }\n      const bounds = this.props.map.getBounds();\n      const center = bounds.getCenter().toBounds(1);\n      const centerVideoXY = bounds_to_xy(center);\n      const centerVideo = _.head(\n        this.props.videoLayout.filter(\n          (v) =>\n            centerVideoXY.x_bottom_left === v.x &&\n            centerVideoXY.y_bottom_left === v.y\n        )\n      );\n      if (centerVideo !== undefined) {\n        this.props.onVideoChange(centerVideo);\n      }\n    };\n    this.getCenterVideo();\n\n    this.index = () => {};\n\n    this.eventLogger = (id) => (evt) => {\n      if (\n        !this.state.canplay[id] &&\n        (evt.type === \"canplay\" ||\n          evt.type === \"canplaythrough\" ||\n          evt.type === \"playing\")\n      ) {\n        this.setState((prevState) => {\n          const canplay = {\n            ...prevState.canplay,\n            [id]: true,\n          };\n          if (this.props.onVideoStatusChange) {\n            this.props.onVideoStatusChange(canplay);\n          }\n          return { canplay };\n        });\n        return;\n      }\n      if (\n        this.state.canplay[id] &&\n        (evt.type === \"stalled\" ||\n          evt.type === \"waiting\" ||\n          evt.type === \"ended\" ||\n          evt.type === \"emptied\")\n      ) {\n        this.setState((prevState) => {\n          const canplay = {\n            ...prevState.canplay,\n            [id]: false,\n          };\n          if (this.props.onVideoStatusChange) {\n            this.props.onVideoStatusChange(canplay);\n          }\n          return { canplay };\n        });\n      }\n    };\n    this.isVisible = (vid) => {\n      if (this.state.globalDisable) {\n        return false;\n      }\n      if (!this.state.visible) {\n        return false;\n      }\n      if (!this.state.xy_bounds) {\n        return false;\n      }\n      return (\n        vid.x >= this.state.xy_bounds.x_bottom_left &&\n        vid.x <= this.state.xy_bounds.x_top_right &&\n        vid.y >= this.state.xy_bounds.y_bottom_left &&\n        vid.y <= this.state.xy_bounds.y_top_right\n      );\n    };\n\n    const handleOnMove = () => {\n      const bounds = this.props.map.getBounds();\n      const xy_bounds = bounds_to_xy(bounds.pad(this.props.boundsPad));\n      if (!_.isEqual(xy_bounds, this.state.xy_bounds)) {\n        this.getCenterVideo();\n        this.setState({ xy_bounds });\n      }\n    };\n    this.handleOnMove = _.throttle(handleOnMove, 50, {\n      leading: true,\n      trailing: true,\n    });\n\n    this.disableAllVideos = () => {\n      console.debug(\"TIMEOUT: DISABLE ALL VIDEOS\");\n      this.setState({\n        globalDisable: true,\n      });\n    };\n\n    this.resetDeadMansSwitch = () => {\n      if (this.state.globalDisable) {\n        console.debug(\"TIMEOUT ENDED: ENABLE ALL VIDEOS\");\n        this.setState({\n          globalDisable: false,\n        });\n      }\n      clearTimeout(this.deadMansSwitch);\n\n      const MINUTES_OF_NO_INTERACTION_BEFORE_VIDEOS_DISABLED = 10;\n      this.deadMansSwitch = setTimeout(\n        this.disableAllVideos,\n        MINUTES_OF_NO_INTERACTION_BEFORE_VIDEOS_DISABLED * 60 * 1000\n      );\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.map) {\n      this.props.map.addEventListener(\"move\", this.handleOnMove);\n      this.handleOnMove();\n    }\n    document.addEventListener(\n      \"visibilitychange\",\n      () => {\n        this.setState({ visible: !document.hidden });\n      },\n      false\n    );\n    this.resetDeadMansSwitch();\n    [\"mouseover\", \"keydown\", \"scroll\", \"touchstart\", \"touchmove\"].forEach(\n      (eventName) =>\n        document.body.addEventListener(\n          eventName,\n          _.throttle(this.resetDeadMansSwitch, 50, {\n            leading: true,\n            trailing: true,\n          })\n        )\n    );\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (!this.props.map && nextProps.map) {\n      console.debug(\"LATE ARRIVING MAP\");\n      nextProps.map.addEventListener(\"move\", this.handleOnMove);\n      this.handleOnMove();\n    }\n    if (!_.isEqual(nextProps, this.props)) {\n      return true;\n    }\n    const updatable_state = [\n      \"canplay\",\n      \"xy_bounds\",\n      \"visible\",\n      \"globalDisable\",\n    ];\n    let updateOk = false;\n    updatable_state.forEach((name) => {\n      if (!_.isEqual(nextState[name], this.state[name])) {\n        updateOk = true;\n      }\n    });\n    // console.debug(\"PREVENTED RENDER\", nextState);\n    return updateOk;\n  }\n\n  render() {\n    const { offline } = this.props;\n    if (!this.props.map) {\n      return null;\n    }\n    const videos = [];\n    this.props.videoLayout.forEach((vid, idx) => {\n      const id = `${vid.filename}-${idx}`;\n      const visible = this.isVisible(vid);\n      let m3u8 = this.props.useCloudfront\n        ? `${cloudfront_base_url}${vid.filename}-playlist.m3u8`\n        : `${base_url}${vid.filename}-playlist.m3u8`;\n      if (offline) {\n        m3u8 = `${offline_url}${vid.filename}-playlist.m3u8`;\n      }\n\n      videos.push(\n        <Video\n          m3u8={m3u8}\n          id={id}\n          key={id}\n          eventLogger={this.eventLogger(id)}\n          video={vid}\n          xy={[vid.x, vid.y]}\n          bounds={xy_to_bounds(vid.x, vid.y)}\n          canplay={!!this.state.canplay[id]}\n          debug={this.props.debug}\n          spinnerTest={this.props.spinnerTest}\n          indexFunc={this.index}\n          visible={visible}\n          {...vid_config}\n        />\n      );\n    });\n    return <>{videos}</>;\n  }\n}\n","import React from \"react\";\nimport hash from \"object-hash\";\n\nimport L from \"leaflet\";\nimport { xy_to_bounds } from \"./vid_config\";\n\nexport default class VideoData {\n  constructor(data) {\n    Object.assign(this, data);\n\n    this.hash = hash(this.filename).slice(0, 6);\n\n    this.url = `https://lifeundertheice.org/${this.x}/${this.y}/${this.hash}`;\n    this.analyticsUrl = `/${this.x}/${this.y}/${this.filename}`;\n\n    this.bounds = () =>\n      new L.LatLngBounds(\n        xy_to_bounds(this.x, this.y)[0],\n        xy_to_bounds(this.x, this.y)[1]\n      );\n    this.screenshot = `https://lifeundertheice.s3.amazonaws.com/${data.filename}.jpg`;\n    this.info = () => ({\n      url: this.url,\n      title: data.title,\n      desc: (\n        <>\n          {data.location}\n          <br />\n          {data.magnification}\n        </>\n      ),\n    });\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport isEqual from \"lodash/isEqual\";\nimport queryString from \"query-string\";\nimport { Helmet } from \"react-helmet\";\n\nimport L from \"leaflet\";\nimport { Map } from \"react-leaflet\";\nimport { withRouter } from \"react-router-dom\";\nimport Intro from \"./components/Intro\";\nimport InfoBox from \"./components/InfoBox\";\n\nimport Sounds from \"./Sounds\";\nimport Videos from \"./Videos\";\n\nimport VideoData from \"./VideoData\";\n\nimport video_layout_data from \"./layout.json\";\n// import video_layout_data from './debug_layout';\n\nimport {\n  x_count,\n  y_count,\n  img_width,\n  img_height,\n  zoomSettings,\n} from \"./vid_config\";\n\nconst video_layout = video_layout_data.map((data) => new VideoData(data));\n\nL.LatLngBounds.fromBBoxString = (bbox) => {\n  const [west, south, east, north] = bbox.split(\",\").map(parseFloat);\n  return new L.LatLngBounds(\n    new L.LatLng(south, west),\n    new L.LatLng(north, east)\n  );\n};\n\nconst map_bounds = [\n  [0, 0],\n  [y_count(video_layout) * img_height, x_count(video_layout) * img_width],\n];\n\nconst propTypes = {\n  hidden: PropTypes.bool,\n};\n\nconst VIDEO_PLAY_TIMEOUT = 10000;\n\nclass Homepage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.startupTime = Date.now();\n\n    setTimeout(() => this.forceUpdate(), VIDEO_PLAY_TIMEOUT);\n\n    this.calculate_initial_video = (x, y, hash) => {\n      let init_video;\n      if (hash !== undefined) {\n        init_video = video_layout.filter((v) => v.hash === hash)[0];\n      } else if (x === undefined || y === undefined) {\n        init_video = video_layout.filter((v) => v.init_position)[0];\n      } else {\n        init_video = video_layout.filter(\n          (v) => v.x === parseInt(x, 10) && v.y === parseInt(y, 10)\n        )[0];\n      }\n      return init_video;\n    };\n\n    this.init_center = () => {\n      // offset a little to center the initial tardigrade better on iPhone X screen\n      const center = this.state.initialVideo.bounds().getCenter();\n      return L.latLng(center.lat - 120, center.lng - 100);\n    };\n\n    L.Map.include(L.LayerIndexMixin);\n\n    const { x, y, hash } = props.match.params;\n    this.state = {\n      introVisible: false,\n      interacting: false,\n      videosPlaying: 0,\n      initialVideo: this.calculate_initial_video(x, y, hash),\n      currentVideo: this.calculate_initial_video(x, y, hash),\n    };\n\n    this.handleOnMove = () => {\n      // we're only using this move listener to do some initial removal of UI elements\n      // so we remove it once that job is done\n      if (this.state.interacting && !this.state.introVisible) {\n        this.state.map.removeEventListener(\"move\", this.handleOnMove);\n        return;\n      }\n\n      if (!this.state.interacting) {\n        this.setState({ interacting: true });\n        return;\n      }\n\n      if (this.state.introVisible && this.state.videosPlaying > 0) {\n        setTimeout(() => {\n          this.setState((prevState) => {\n            if (prevState.introVisible) {\n              return { introVisible: false };\n            }\n            return null;\n          });\n        }, 500);\n      }\n    };\n\n    this.onVideoChange = (currentVideo) => {\n      this.setState((prevState) => {\n        if (isEqual(prevState.currentVideo, currentVideo)) {\n          return undefined;\n        }\n        console.debug(\"Center microbe is \", currentVideo.url);\n        return { currentVideo };\n      });\n    };\n\n    this.onMapLoad = ({ leafletElement }) => {\n      this.setState({\n        map: leafletElement,\n        introVisible: true,\n        boundsPad: zoomSettings().boundsPad,\n      });\n    };\n\n    this.updateVideoStatus = (status) => {\n      const videosPlaying = Object.keys(status).length;\n      this.setState({ videosPlaying });\n    };\n  }\n\n  render() {\n    const query = queryString.parse(this.props.location.search);\n    const offline = !!query.offline;\n\n    let introMessage = \"Drag To Discover New Creatures\";\n    if (this.state.videosPlaying === 0) {\n      introMessage = \"Loading Microbes...\";\n      if (offline) {\n        introMessage = \"Looking For Microbes...\";\n      } else if (Date.now() - this.startupTime > VIDEO_PLAY_TIMEOUT) {\n        introMessage = (\n          <div className=\"connection-problem\">\n            <span\n              role=\"img\"\n              aria-label=\"warning\"\n              className=\"connection-problem-emoji\"\n            >\n              \n            </span>\n            <br />\n            Your connection is too slow to load this webpage.\n            <br />\n            Please find a faster connection.\n          </div>\n        );\n      }\n    }\n    let helmetData = {\n      title: \"Life Under the Ice\",\n      description:\n        \"An exploratory tour through the microscopic world of Antarctica. Each microbe tells a story of the weird and whimsical life in Antarctica that is otherwise invisible to the naked eye.\",\n      image: \"https://lifeundertheice.org/TwitterCard_Tardigrade.jpg\",\n    };\n    if (this.state.currentVideo && !this.state.currentVideo.init_position) {\n      helmetData = {\n        title: `${this.state.currentVideo.title} - Life Under The Ice`,\n        image: this.state.currentVideo.screenshot,\n        description: this.state.currentVideo.location,\n      };\n    }\n    return (\n      <>\n        <Helmet>\n          <meta name=\"twitter:title\" content={helmetData.title} />\n          <meta name=\"twitter:description\" content={helmetData.description} />\n          <meta name=\"twitter:image\" content={helmetData.image} />\n          <meta property=\"og:title\" content={helmetData.title} />\n          <meta property=\"og:description\" content={helmetData.description} />\n          <meta property=\"og:image\" content={helmetData.image} />\n        </Helmet>\n        <Intro\n          visible={this.state.introVisible}\n          displayMode={this.props.displayMode}\n        >\n          {introMessage}\n        </Intro>\n        {!this.props.hidden && (\n          <Map\n            key=\"map\"\n            crs={L.CRS.Simple}\n            zoomControl={!offline}\n            zoomSnap={0}\n            zoomDelta={0.25}\n            zoom={zoomSettings().initZoom}\n            minZoom={zoomSettings().minZoom}\n            maxZoom={zoomSettings().maxZoom}\n            center={this.init_center()}\n            keyboardPanDelta={150}\n            onMove={this.handleOnMove}\n            maxBounds={map_bounds}\n            attributionControl={false}\n            bounceAtZoomLimits={false}\n            ref={this.onMapLoad}\n          >\n            <Videos\n              offline={offline}\n              debug={query.debug}\n              spinnerTest={query.spinnerTest}\n              showLoadingProblem={query.loading}\n              useCloudfront={!!query.cloudfront}\n              videoLayout={video_layout}\n              onVideoChange={this.onVideoChange}\n              onVideoStatusChange={this.updateVideoStatus}\n              boundsPad={this.state.boundsPad}\n              map={this.state.map}\n            />\n            <Sounds\n              map={this.state.map}\n              paused={this.state.introVisible}\n              debug={query.debug}\n              enabled={query.sound}\n            />\n          </Map>\n        )}\n        {this.state.currentVideo && this.state.videosPlaying > 0 && (\n          <InfoBox\n            hidden={false}\n            {...this.state.currentVideo.info()}\n            displayMode={this.props.displayMode}\n          />\n        )}\n      </>\n    );\n  }\n}\n\nHomepage.propTypes = propTypes;\nHomepage.defaultProps = { hidden: true };\n\nexport default withRouter(Homepage);\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { Offline, Online } from \"../Offline\";\n\nimport \"./Page.scss\";\n\nconst RemoveAnchorTags = ({ children }) => {\n  const processChildren = (child) => {\n    if (!React.isValidElement(child)) {\n      return child;\n    }\n\n    if (child.type === \"a\" && child.props.href) {\n      // If it's an anchor tag, return its children without the anchor\n      return child.props.children;\n    }\n\n    if (child.props.children) {\n      // If the element has children, process them recursively\n      return React.cloneElement(child, {\n        ...child.props,\n        children: React.Children.map(child.props.children, processChildren),\n      });\n    }\n\n    // Return the element if it doesn't meet the above conditions\n    return child;\n  };\n\n  // Process each child of this component\n  const processedChildren = React.Children.map(children, processChildren);\n\n  return <>{processedChildren}</>;\n};\n\nconst Page = (props) => {\n  return (\n    <div className={classNames(\"page\", props.slug, props.displayMode)}>\n      <div className=\"wrapper\">\n        <Online>{props.children}</Online>\n        <Offline>\n          <RemoveAnchorTags>{props.children}</RemoveAnchorTags>\n        </Offline>\n      </div>\n    </div>\n  );\n};\nexport default Page;\n","import React from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport Page from \"./Page/Page\";\nimport { Online } from \"./Offline\";\n\nconst About = (props) => {\n  const page = \"About the Project\";\n\n  return (\n    <Page displayMode={props.displayMode}>\n      {/* edit below */}\n\n      <Helmet>\n        <meta name=\"twitter:title\" content={`Life Under The Ice - ${page}`} />\n        <meta property=\"og:title\" content={`Life Under The Ice - ${page}`} />\n        <meta\n          name=\"twitter:description\"\n          content=\"Life Under the Ice is an exploratory tour through the microscopic world of Antarctica, created by Ariel Waldman.\"\n        />\n        <meta\n          property=\"og:description\"\n          content=\"Life Under the Ice is an exploratory tour through the microscopic world of Antarctica, created by Ariel Waldman.\"\n        />\n        <meta\n          name=\"twitter:image\"\n          content=\"https://lifeundertheice.org/TwitterCard_Tardigrade.jpg\"\n        />\n        <meta\n          property=\"og:image\"\n          content=\"https://lifeundertheice.org/TwitterCard_Tardigrade.jpg\"\n        />\n      </Helmet>\n\n      <h1>{page}</h1>\n\n      <p>\n        <em>Life Under the Ice</em> is an exploratory tour through the\n        microscopic world of Antarctica, created by{\" \"}\n        <a href=\"https://arielwaldman.com\">Ariel Waldman</a>. Each microbe tells\n        a story of the weird and whimsical life in Antarctica that is otherwise\n        invisible to the naked eye.\n      </p>\n\n      <p>\n        Typically when we think about Antarctica, we think of a place that's\n        barren and lifeless... except for a few penguins. But Antarctica should\n        instead be known as a polar oasis of life, host to countless creatures\n        that are utterly fascinating. Theyve just been invisible to us  until\n        now. <em>Life Under the Ice</em> enables anyone to delve into the\n        microscopic world of Antarctica as an explorer; as if you had been\n        shrunk down and were wading through one large petri dish of curiosities.\n      </p>\n\n      <p>\n        All microscopy videos from the project are licensed under a Creative\n        Commons Attribution-NonCommercial 4.0 International License (CC BY-NC\n        4.0) and available at{\" \"}\n        <a href=\"https://lifeundertheice.org/videos\">\n          lifeundertheice.org/videos\n        </a>\n        . <em>Life Under the Ice</em> will continue to be updated with new\n        videos of Antarctic microbes every several months as new samples are\n        made available and processed.\n      </p>\n\n      <p>\n        You can directly support this project by{\" \"}\n        <a href=\"https://patreon.com/arielwaldman\">becoming a patron</a>.\n      </p>\n\n      <div className=\"contact\">\n        <p>\n          If you would like to get in touch regarding{\" \"}\n          <em>Life Under the Ice</em>, email{\" \"}\n          <a href=\"mailto:ariel@arielwaldman.com\">ariel@arielwaldman.com</a>.\n        </p>\n      </div>\n\n      <h2>THE EXPEDITION</h2>\n\n      <p>\n        <a href=\"https://arielwaldman.com\">Ariel Waldman</a> led a 5-week\n        expedition to Antarctica as a wildlife filmmaker at the microbial scale.\n        She brought microscopes into the field to film and investigate the\n        microscopic extremophiles that live under the ice so that we can have a\n        more complete picture of our home planet.\n      </p>\n\n      <p>\n        The collected Antarctic microbes were found living within glaciers,\n        under the sea ice, next to frozen lakes, and in subglacial ponds.\n        Microbes from under the sea ice were discovered in the Southern Oceans\n        McMurdo Sound near McMurdo Station and the Erebus Glacier Tongue.\n        Microbes from glaciers and frozen lakes were discovered in the McMurdo\n        Dry Valleys at Lake Bonney and Lake Hoare.\n      </p>\n\n      <figure>\n        <img\n          src=\"/USGS_McMurdoSound_Cropped_Highlighted.jpg\"\n          alt=\"USGS Map of McMurdo Sound\"\n        />\n        <figcaption>\n          Map courtesy of USGS. Yellow circles highlight locations sampled.\n        </figcaption>\n      </figure>\n\n      <p>\n        While in Antarctica, Ariel filmed her expedition and showcased the\n        locations, fieldwork, people, and processes of what it was like to\n        capture life under the ice. From how to get to Antarctica to diving\n        beneath the sea ice, the five-episode mini-series below reveals the\n        experience of being in Antarctica in a way you likely haven't seen\n        before.\n      </p>\n\n      <Online>\n        <div className=\"embeds_wrapper\">\n          <figure className=\"figure-group\" role=\"group\">\n            <figure>\n              <iframe\n                title=\"How to get to Antarctica - Episode 1\"\n                className=\"youtube_embed\"\n                src=\"https://www.youtube.com/embed/VJZIgFO-dFg\"\n                frameBorder=\"0\"\n                allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\"\n                allowFullScreen\n              />\n              <figcaption>\n                Ariel spent 5 weeks in Antarctica to film microbes living under\n                the ice. Here's how she got there.\n              </figcaption>\n            </figure>\n\n            <div className=\"caption\" aria-hidden=\"true\">\n              Ariel spent 5 weeks in Antarctica to film microbes living under\n              the ice. Here's how she got there.\n            </div>\n\n            <figure>\n              <iframe\n                title=\"Antarctica under the ice - Episode 2\"\n                className=\"youtube_embed\"\n                src=\"https://www.youtube.com/embed/u9aHl-qssHI\"\n                frameBorder=\"0\"\n                allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\"\n                allowFullScreen\n              />\n              <figcaption>\n                Ariel joined Antarctic divers in going deep under the sea ice to\n                explore the weird wonders of the Southern Ocean.\n              </figcaption>\n            </figure>\n\n            <div className=\"caption\" aria-hidden=\"true\">\n              Ariel joined Antarctic divers in going deep under the sea ice to\n              explore the weird wonders of the Southern Ocean.\n            </div>\n\n            <figure>\n              <iframe\n                title=\"Camping in Antarctica - Episode 3\"\n                className=\"youtube_embed\"\n                src=\"https://www.youtube.com/embed/d7TMawjKG5k\"\n                frameBorder=\"0\"\n                allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\"\n                allowFullScreen\n              />\n              <figcaption>\n                Here's what it was like to camp outside in the Antarctic Dry\n                Valleys next to the natural phenomenon known as Blood Falls.\n              </figcaption>\n            </figure>\n\n            <div className=\"caption\" aria-hidden=\"true\">\n              Here's what it was like to camp outside in the Antarctic Dry\n              Valleys next to the natural phenomenon known as Blood Falls.\n            </div>\n\n            <figure>\n              <iframe\n                title=\"Extremophiles of Antarctica - Episode 4\"\n                className=\"youtube_embed\"\n                src=\"https://www.youtube.com/embed/hImxHVhlan4\"\n                frameBorder=\"0\"\n                allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\"\n                allowFullScreen\n              />\n              <figcaption>\n                Some of the extremophiles Ariel sought to film with her\n                microscopes live embedded INSIDE glaciers. Ariel climbed on to\n                the top of a glacier in search for tardigrades and shared what\n                it was like to camp at Lake Hoare next to Canada Glacier.\n              </figcaption>\n            </figure>\n\n            <div className=\"caption\" aria-hidden=\"true\">\n              Some of the extremophiles Ariel sought to film with her\n              microscopes live embedded INSIDE glaciers. Ariel climbed on to the\n              top of a glacier in search for tardigrades and shared what it was\n              like to camp at Lake Hoare next to Canada Glacier.\n            </div>\n\n            <figure>\n              <iframe\n                title=\"Antarctica robot road trip - Episode 5\"\n                className=\"youtube_embed\"\n                src=\"https://www.youtube.com/embed/PcZxLJ9RbLM\"\n                frameBorder=\"0\"\n                allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\"\n                allowFullScreen\n              />\n              <figcaption>\n                While in Antarctica, Ariel went on a day-long road trip across\n                the sea ice with a team that uses a robot called Icefin to\n                explore the seafloor. One day, robots like Icefin may help us\n                explore the icy moons in our solar system, such as Europa.\n              </figcaption>\n            </figure>\n\n            <div className=\"caption\" aria-hidden=\"true\">\n              While in Antarctica, Ariel went on a day-long road trip across the\n              sea ice with a team that uses a robot called Icefin to explore the\n              seafloor. One day, robots like Icefin may help us explore the icy\n              moons in our solar system, such as Europa.\n            </div>\n          </figure>\n        </div>\n      </Online>\n\n      <div className=\"disclosure\">\n        <p>\n          <em>\n            Disclosure: This material is based upon work supported by the\n            National Science Foundation under Grant Number 1745408. Any\n            opinions, findings, and conclusions or recommendations expressed in\n            this material are those of the author and do not necessarily reflect\n            the views of the National Science Foundation.\n          </em>\n        </p>\n      </div>\n    </Page>\n  );\n};\n\nexport default About;\n","import React from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport Page from \"./Page/Page\";\n\nconst Acknowledgements = (props) => {\n  const page = \"Acknowledgements\";\n\n  return (\n    <Page displayMode={props.displayMode}>\n      {/* edit below */}\n\n      <Helmet>\n        <meta name=\"twitter:title\" content={`Life Under The Ice - ${page}`} />\n        <meta property=\"og:title\" content={`Life Under The Ice - ${page}`} />\n        <meta\n          name=\"twitter:description\"\n          content=\"The process of formulating, creating and executing Life Under the Ice was six years in the making.\"\n        />\n        <meta\n          property=\"og:description\"\n          content=\"The process of formulating, creating and executing Life Under the Ice was six years in the making.\"\n        />\n        <meta\n          name=\"twitter:image\"\n          content=\"https://lifeundertheice.org/TwitterCard_Tardigrade.jpg\"\n        />\n        <meta\n          property=\"og:image\"\n          content=\"https://lifeundertheice.org/TwitterCard_Tardigrade.jpg\"\n        />\n      </Helmet>\n\n      <h1>{page}</h1>\n\n      <p>\n        <em>\n          The process of formulating, creating and executing Life Under the Ice\n          was six years in the making. The expedition and project would not have\n          been possible without the support of so many awesome people and\n          organizations along the way. I have attempted to list them all below\n          both because they are deserving of so much gratitude, but also to be\n          transparent in detailing just how much it takes a village for\n          someone to accomplish their dreams.\n        </em>\n        <br /> <a href=\"https://arielwaldman.com\">Ariel Waldman</a>, creator of{\" \"}\n        <em>Life Under the Ice</em>\n      </p>\n      <br />\n      <p>\n        <strong>Enormous thanks to</strong>\n      </p>\n\n      <p>\n        <strong>\n          <a href=\"https://www.nsf.gov/funding/pgm_summ.jsp?pims_id=503518\">\n            National Science Foundation Antarctic Artists & Writers program\n          </a>\n        </strong>\n        <br />\n        for being an invaluable program and resource in service to artists,\n        scientists and society at-large. The program covered the cost of\n        international flights, as well as logistics, food, and housing while in\n        Antarctica. Specifically, thank you to Mike Lucibella and Elaine Hood\n        for welcoming me to such a special place and taking on the lions share\n        of all the months of logistics it took to create a successful expedition\n        (including helping me physically lug many pounds of camera and\n        microscope equipment around). Thank you also to Valentine Kass and Peter\n        West for managing such an incredible program and providing valuable\n        feedback and guidance over the years.\n      </p>\n\n      <p>\n        <strong>\n          <a href=\"https://lisaballard.dev/\">Lisa Ballard</a>\n        </strong>\n        <br />\n        for being the lead web developer for Life Under the Ice, turning a vague\n        concept into a technical reality and open sourcing it along the way.\n        Also for being there for me as an awesome BFF throughout the ups and\n        downs of this effort.\n      </p>\n\n      <p>\n        <strong>\n          <a href=\"https://twitter.com/mattb\">Matt Biddulph</a>\n        </strong>\n        <br />\n        for being the deputy web developer for <em>Life Under the Ice</em> and\n        navigating the challenges of video on the web. Thanks also for being the\n        best partner, cheerleader, and collaborator throughout.\n      </p>\n\n      <p>\n        <strong>National Geographic</strong>\n        <br />\n        for supporting unaffiliated, independent explorers such as myself.\n        National Geographics{\" \"}\n        <a href=\"https://www.nationalgeographic.org/funding-opportunities/grants/what-we-fund/\">\n          exploration grant\n        </a>{\" \"}\n        allowed me to acquire a robust field-microscope setup, hire a web\n        developer to help make this project come to fruition, and provided a\n        modest stipend for the first couple months of my post-expedition\n        microscopy work.\n      </p>\n\n      <p>\n        <strong>\n          All my patrons on{\" \"}\n          <a href=\"https://patreon.com/arielwaldman\">Patreon</a>\n        </strong>\n        <br />\n        for being awesome humans and supporting my otherwise-unfunded work and\n        lab equipment{\" \"}\n        <a href=\"https://www.patreon.com/posts/heavy-sigh-and-11497109\">\n          over the years\n        </a>\n        . This included time spent: researching, developing and writing\n        proposals, meeting with artists and scientists to solicit support,\n        teaching myself microscopy, taking one year of classes and lab time at\n        school to become certified in microscopy, figuring out permits, figuring\n        out equipment needs, five months of working closely with NSF on\n        logistics and preparing everything for my expedition, the five weeks I\n        spent in Antarctica, production of a{\" \"}\n        <a href=\"https://www.youtube.com/playlist?list=PLN_whQB72CoDyLvgy12QpPszBA808YxMW\">\n          five episode mini-series\n        </a>{\" \"}\n        about the expedition, and all the development that went into the\n        creation of this website once I got back home.\n      </p>\n\n      <p>\n        <strong>\n          <a href=\"https://en.wikipedia.org/wiki/Christopher_McKay\">\n            Chris McKay\n          </a>\n        </strong>\n        <br />\n        for being my champion and guide throughout. There is so much unwritten\n        knowledge about the logistics and politics of Antarctic work that I\n        wouldve likely never known about and struggled to navigate without his\n        shared wisdom. Chris helped me brainstorm the project its nascent days,\n        gave me my first microscope, helped identify peer-reviewed papers\n        relevant to my project, encouraged me to conduct my own\n        portfolio-building field work, provided feedback on my proposals, and\n        was a co-author for my first academic conference poster. He also helped\n        kickstart my growing interest in astrobiology.\n      </p>\n\n      <p>\n        <strong>\n          <a href=\"https://micro.utk.edu/faculty/mikucki.php\">Jill Mikucki</a>\n        </strong>\n        <br />\n        for defending the merit of this project over the years, fighting for me\n        to get what I needed for a successful expedition, and taking me under\n        her wing while simultaneously showing me how to take charge in\n        Antarctica. Ill forever have fond memories of the week I spent camping\n        at Lake Bonney, the site of Blood Falls and her{\" \"}\n        <a href=\"http://astrobiology.com/2014/03/exploring-below-antarcticas-blood-falls.html\">\n          prime stomping ground\n        </a>\n        .\n      </p>\n\n      <p>\n        <strong>\n          <a href=\"https://www.sfmicrosoc.org/\">\n            San Francisco Microscopical Society\n          </a>\n        </strong>\n        <br />\n        for providing a friendly, local community to welcome me when I was just\n        a self-taught beginner in microscopy looking for help. A small grant\n        from SFMS allowed me to purchase the primary microscope much of the\n        microbes on this site are seen through (a Nikon E200-LED). Thanks\n        specifically to Peter Werner for recommending I enroll in school to\n        receive my certification in microscopy and teaching me so much, and Cody\n        Prebys-Williams and Henry Schott for so much encouragement and support.\n      </p>\n\n      <p>\n        <strong>Merritt College</strong>\n        <br />\n        and specifically Gisele Giorgi for creating an inclusive microscopy\n        program that welcomes students who want to use microscopes for science,\n        art, or just a better paycheck. The{\" \"}\n        <a href=\"https://www.merritt.edu/wp/microscopy/\">\n          Merritt Microscopy Program\n        </a>{\" \"}\n        certified me in optical microscopy, but more importantly gave me the\n        confidence I needed to be a self-reliant microscopist in the field in\n        Antarctica. Thanks also to Candy Mintz for giving me the confidence I\n        need to run my own lab space.\n      </p>\n\n      <p>\n        <strong>\n          <a href=\"http://schmidt.eas.gatech.edu/project-rise-up/\">\n            Britney Schmidt & the Icefin team\n          </a>\n        </strong>\n        <br />\n        for your support, time, helpful advice, and welcoming me to ride along\n        with your awesome robot.\n      </p>\n\n      <p>\n        <strong>\n          <a href=\"https://pacificasommers.com/\">Pacifica Sommers</a>,{\" \"}\n          <a href=\"https://entnemdept.ifas.ufl.edu/people-directory/dorota-porazinska/\">\n            Dorota Porazinska\n          </a>\n          , and Adam Solon\n        </strong>\n        <br />\n        for helping me conquer hiking up my first glacier! I couldnt have done\n        it without their expertise, assistance, and patience. They literally\n        helped me tie my shoes (crampons) at one point. All in service of\n        exploring the many awesome microbes that live inside glaciers via{\" \"}\n        <a href=\"https://cryoholes.wordpress.com/\">cryoconite holes</a>. Thanks\n        also to Dorota for giving me awesome pointers on how to filter microbes\n        in the field.\n      </p>\n\n      <p>\n        <strong>\n          <a href=\"https://antarcticsun.usap.gov/features/4191/\">Rob Robbins</a>\n          , Steve Rupp, and{\" \"}\n          <a href=\"http://www.henrykaiserguitar.com/\">Henry Kaiser</a>\n        </strong>\n        <br />\n        for diving into the cold depths of Antarctic waters to fetch me the\n        coolest of microbes. Also thanks for being so welcoming, helping me\n        navigate McMurdo, and making sure I was included.\n      </p>\n\n      <p>\n        <strong>\n          <a href=\"http://kenmankoff.com\">Ken Mankoff</a>\n        </strong>\n        <br />\n        for being the first to tell me about the existence of the Antarctic\n        Artists and Writers program, encouraging me to apply, and putting me in\n        touch with Jill Mikucki. This journey would not have even begun without\n        him suggesting it to me.\n      </p>\n\n      <p>\n        <strong>\n          <a href=\"https://nai.nasa.gov/directory/boston-penelope/\">\n            Penny Boston\n          </a>\n        </strong>\n        <br />\n        for including me in the astrobiology world, sending opportunities my\n        way, helping review my proposals, and providing tons of helpful advice\n        and guidance over the years.\n      </p>\n\n      <p>\n        <strong>\n          <a href=\"http://www.montana.edu/priscu/\">John Priscu</a>\n        </strong>\n        <br />\n        for providing a letter of support to someone new to the Antarctic field,\n        and for trying to get me out into the deep field of Antarctica, which\n        I still hope to find an opportunity to.\n      </p>\n\n      <p>\n        <strong>\n          <a href=\"https://www.nasa.gov/content/lynn-j-rothschild\">\n            Lynn Rothschild\n          </a>\n        </strong>\n        <br />\n        for offering a letter of support and being a champion of\n        multidisciplinary collaboration.\n      </p>\n\n      <p>\n        <strong>\n          <a href=\"https://www.siena.edu/faculty-and-staff/person/matt-bellis/\">\n            Matt Bellis\n          </a>\n        </strong>\n        <br />\n        for taking the time to review my proposals, provide valuable\n        suggestions, and for always offering help when I need it.\n      </p>\n\n      <p>\n        <strong>\n          <a href=\"https://twitter.com/Alex_Parker\">Alex Parker</a>\n        </strong>\n        <br />\n        for helping review my proposals, making valuable introductions, and\n        providing excellent advice on how to convey my concept.\n      </p>\n\n      <p>\n        <strong>\n          <a href=\"https://adamslab.byu.edu/\">Byron Adams</a>\n        </strong>\n        <br />\n        for helping me get my lab supplies in order, tracking down answers, and\n        providing additional microbes for filming. Thanks also for all the\n        support and encouragement to collaborate in future expeditions.\n      </p>\n\n      <p>\n        <strong>\n          <a href=\"http://www.maryannarogers.com/\">Maryanna Rogers</a>\n        </strong>\n        <br />\n        for the letter of support and helping workshop my proposal to stay\n        rooted in art.\n      </p>\n\n      <p>\n        <strong>\n          <a href=\"https://twitter.com/ianbrunswick\">Ian Brunswick</a> and{\" \"}\n          <a href=\"https://twitter.com/shaunoboyle\">Shaun OBoyle</a>\n        </strong>\n        <br />\n        for letters of support and being a welcoming interface to the awesome{\" \"}\n        <a href=\"https://dublin.sciencegallery.com/\">Science Gallery</a>{\" \"}\n        network.\n      </p>\n\n      <p>\n        <strong>\n          <a href=\"http://www.ganucheau.com/\">Matt Ganucheau</a>\n        </strong>\n        <br />\n        for the letter of support and encouragement from the world of art+tech.\n      </p>\n\n      <p>\n        <strong>\n          <a href=\"https://www.seti.org/our-scientists/seth-shostak\">\n            Seth Shostak\n          </a>\n        </strong>\n        <br />\n        for the letter of support early on, being a sounding board, and for\n        always believing in me.\n      </p>\n\n      <p>\n        <strong>\n          <a href=\"http://www.iftf.org/marinagorbis/\">Marina Gorbis</a>\n        </strong>\n        <br />\n        for the encouragement, cheerleading, and letter of support early on.\n      </p>\n\n      <p>\n        <strong>\n          <a href=\"https://sloan.org/about/staff/joshua-m-greenberg\">\n            Josh Greenberg\n          </a>\n        </strong>\n        <br />\n        for the encouragement and letter of support early on in this effort.\n      </p>\n\n      <p>\n        <strong>Brad Bebout and Angela Detweiler</strong>\n        <br />\n        for helping me build my portfolio in the lead up to this project by\n        letting me come take photos of the{\" \"}\n        <a href=\"https://spacescience.arc.nasa.gov/microecobiogeo/\">\n          awesome microbial mats\n        </a>{\" \"}\n        you grow at NASA Ames.\n      </p>\n\n      <p>\n        <strong>\n          <a href=\"http://djspooky.com/\">Paul Miller</a>\n        </strong>\n        <br />\n        for keeping me motivated and helping me think about alternative pathways\n        to Antarctica if this one didnt pan out.\n      </p>\n\n      <p>\n        <strong>\n          <a href=\"https://www.linkedin.com/in/mills42/\">Caroline Miller</a>\n        </strong>\n        <br />\n        for giving me a tour of an awesome microscope startup and offering space\n        for me to experiment with microscopes early on in my microscopy journey.\n        And thanks to Stef Magdalinski for introducing me to Caroline.\n      </p>\n\n      <p>\n        <strong>Friends, family, and colleagues</strong>\n        <br />\n        for rooting for me over the years since I started pursuing this dream in\n        earnest in 2013. Im grateful for all your support.\n      </p>\n\n      <p>\n        <strong>All the wonderful people I met while in Antarctica</strong>\n        <br />\n        for helping me with really huge tasks and also just in small ways, and\n        for being so friendly and making me feel welcome. Theres so many of\n        you. 60 to be exact. Thanks (and thank you again) to Peter Abraham, Nels\n        Abrams, Denis Barkats, Kimberly Beachy, Anne Beaulaurier, Marci Beitch,\n        Linda Best, Yubecca Bragg, Frances Bryson, David Burris, Amy Chiuchiolo,\n        Andrew Christensen, Christine Colburn, Jessie Crain, Richard Dean, Peter\n        Doran, Megan Goodale, Chad Goodale, Michael Gooseff, Hailey Gruber,\n        Tiegan Hobbs, Elaine Hood, Henry Kaiser, Cole Kelleher, Robert Kendall,\n        Mitch Kennedy, Doug Kowalewski, Michelle LaRue, Jennifer Law, Justin\n        Lawrence, Mike Lucibella, Timothy Lynch, Ellie Mango, Matt Meister, Jill\n        Mikucki, Andy Mullen, Mark Murphy, Krista Myers, Madeline Myers, Susan\n        Nachtigal, Dorota Porazinska, Jennifer Rhemann, Rob Robbins, David\n        Robinson, T.J. Rogers, Steve Rupp, Caitlin Scarano, Neal Scheibe,\n        Britney Schmidt, Adam Solon, Pacifica Sommers, Michael Stone, James\n        VanMatre, Claire Veligdan, Joe Wallis, Kathleen Welch, David White,\n        Spring Wood, Debora Zamd, and Steve Zellerhoff.\n      </p>\n    </Page>\n  );\n};\n\nexport default Acknowledgements;\n","import React from \"react\";\n\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { DARK_MODE_HASH, LIGHT_MODE_HASH } from \"./constants\";\n\nimport Menu from \"./components/Menu\";\nimport Homepage from \"./Homepage\";\nimport About from \"./About\";\nimport Acknowledgements from \"./Acknowledgements\";\n\nimport \"./App.scss\";\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      hideMap: true,\n      displayMode: LIGHT_MODE_HASH.slice(1),\n    };\n  }\n\n  componentDidMount() {\n    const urlHash = window.location.hash;\n\n    if (urlHash === DARK_MODE_HASH) {\n      const displayMode = DARK_MODE_HASH.slice(1);\n      this.setState({ displayMode });\n      document.body.classList.add(displayMode);\n    }\n\n    window.setTimeout(() => {\n      this.setState({ hideMap: false });\n    }, 500);\n  }\n\n  render() {\n    return (\n      <Router>\n        <Switch>\n          <Route\n            path=\"/videos\"\n            component={() => {\n              window.location.href =\n                \"//www.youtube.com/channel/UCsQ5-o7tNvSxfAl8YjplKnw/\";\n              return null;\n            }}\n          />\n\n          <Route path=\"/about\">\n            <Menu page=\"about\" displayMode={this.state.displayMode} />\n            <About displayMode={this.state.displayMode} />\n          </Route>\n          <Route path=\"/thanks\">\n            <Menu page=\"thanks\" displayMode={this.state.displayMode} />\n            <Acknowledgements displayMode={this.state.displayMode} />\n          </Route>\n          <Route path=\"/:x?/:y?/:hash?\">\n            <Menu page=\"home\" displayMode={this.state.displayMode} />\n            <Homepage\n              hidden={this.state.hideMap}\n              displayMode={this.state.displayMode}\n            />\n          </Route>\n        </Switch>\n      </Router>\n    );\n  }\n}\n","/* eslint-disable */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.debug(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.debug(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.debug(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.debug(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}